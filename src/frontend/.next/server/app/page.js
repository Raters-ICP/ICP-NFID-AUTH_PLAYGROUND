(()=>{var e={};e.id=931,e.ids=[931],e.modules={7849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},5403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},4749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},4300:e=>{"use strict";e.exports=require("buffer")},6005:e=>{"use strict";e.exports=require("node:crypto")},1017:e=>{"use strict";e.exports=require("path")},5034:e=>{"use strict";e.exports=require("url")},6267:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>a.a,__next_app__:()=>f,originalPathname:()=>u,pages:()=>d,routeModule:()=>p,tree:()=>c}),r(1254),r(2567),r(7824);var i=r(3282),n=r(5736),o=r(3906),a=r.n(o),s=r(6880),l={};for(let e in s)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>s[e]);r.d(t,l);let c=["",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,1254)),"/app/src/frontend/app/page.tsx"],metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,6952))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(r.bind(r,2567)),"/app/src/frontend/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,7824,23)),"next/dist/client/components/not-found-error"],metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,6952))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],d=["/app/src/frontend/app/page.tsx"],u="/page",f={require:r,loadChunk:()=>Promise.resolve()},p=new i.AppPageRouteModule({definition:{kind:n.x.APP_PAGE,page:"/page",pathname:"/",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},9182:(e,t,r)=>{Promise.resolve().then(r.t.bind(r,4424,23)),Promise.resolve().then(r.t.bind(r,7752,23)),Promise.resolve().then(r.t.bind(r,5275,23)),Promise.resolve().then(r.t.bind(r,9842,23)),Promise.resolve().then(r.t.bind(r,1633,23)),Promise.resolve().then(r.t.bind(r,9224,23))},9942:(e,t,r)=>{Promise.resolve().then(r.bind(r,8881))},5784:(e,t,r)=>{Promise.resolve().then(r.bind(r,8692))},2641:(e,t,r)=>{"use strict";let i,n;r.r(t),r.d(t,{NIL:()=>E,parse:()=>m,stringify:()=>g,v1:()=>v,v3:()=>b,v4:()=>I,v5:()=>O,validate:()=>u,version:()=>x});let o=require("crypto");var a=r.n(o);let s=new Uint8Array(256),l=s.length;function c(){return l>s.length-16&&(a().randomFillSync(s),l=0),s.slice(l,l+=16)}let d=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i,u=function(e){return"string"==typeof e&&d.test(e)},f=[];for(let e=0;e<256;++e)f.push((e+256).toString(16).slice(1));function p(e,t=0){return f[e[t+0]]+f[e[t+1]]+f[e[t+2]]+f[e[t+3]]+"-"+f[e[t+4]]+f[e[t+5]]+"-"+f[e[t+6]]+f[e[t+7]]+"-"+f[e[t+8]]+f[e[t+9]]+"-"+f[e[t+10]]+f[e[t+11]]+f[e[t+12]]+f[e[t+13]]+f[e[t+14]]+f[e[t+15]]}let g=function(e,t=0){let r=p(e,t);if(!u(r))throw TypeError("Stringified UUID is invalid");return r},y=0,h=0,v=function(e,t,r){let o=t&&r||0,a=t||Array(16),s=(e=e||{}).node||i,l=void 0!==e.clockseq?e.clockseq:n;if(null==s||null==l){let t=e.random||(e.rng||c)();null==s&&(s=i=[1|t[0],t[1],t[2],t[3],t[4],t[5]]),null==l&&(l=n=(t[6]<<8|t[7])&16383)}let d=void 0!==e.msecs?e.msecs:Date.now(),u=void 0!==e.nsecs?e.nsecs:h+1,f=d-y+(u-h)/1e4;if(f<0&&void 0===e.clockseq&&(l=l+1&16383),(f<0||d>y)&&void 0===e.nsecs&&(u=0),u>=1e4)throw Error("uuid.v1(): Can't create more than 10M uuids/sec");y=d,h=u,n=l;let g=((268435455&(d+=122192928e5))*1e4+u)%4294967296;a[o++]=g>>>24&255,a[o++]=g>>>16&255,a[o++]=g>>>8&255,a[o++]=255&g;let v=d/4294967296*1e4&268435455;a[o++]=v>>>8&255,a[o++]=255&v,a[o++]=v>>>24&15|16,a[o++]=v>>>16&255,a[o++]=l>>>8|128,a[o++]=255&l;for(let e=0;e<6;++e)a[o+e]=s[e];return t||p(a)},m=function(e){let t;if(!u(e))throw TypeError("Invalid UUID");let r=new Uint8Array(16);return r[0]=(t=parseInt(e.slice(0,8),16))>>>24,r[1]=t>>>16&255,r[2]=t>>>8&255,r[3]=255&t,r[4]=(t=parseInt(e.slice(9,13),16))>>>8,r[5]=255&t,r[6]=(t=parseInt(e.slice(14,18),16))>>>8,r[7]=255&t,r[8]=(t=parseInt(e.slice(19,23),16))>>>8,r[9]=255&t,r[10]=(t=parseInt(e.slice(24,36),16))/1099511627776&255,r[11]=t/4294967296&255,r[12]=t>>>24&255,r[13]=t>>>16&255,r[14]=t>>>8&255,r[15]=255&t,r};function _(e,t,r){function i(e,i,n,o){var a;if("string"==typeof e&&(e=function(e){e=unescape(encodeURIComponent(e));let t=[];for(let r=0;r<e.length;++r)t.push(e.charCodeAt(r));return t}(e)),"string"==typeof i&&(i=m(i)),(null===(a=i)||void 0===a?void 0:a.length)!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");let s=new Uint8Array(16+e.length);if(s.set(i),s.set(e,i.length),(s=r(s))[6]=15&s[6]|t,s[8]=63&s[8]|128,n){o=o||0;for(let e=0;e<16;++e)n[o+e]=s[e];return n}return p(s)}try{i.name=e}catch(e){}return i.DNS="6ba7b810-9dad-11d1-80b4-00c04fd430c8",i.URL="6ba7b811-9dad-11d1-80b4-00c04fd430c8",i}let b=_("v3",48,function(e){return Array.isArray(e)?e=Buffer.from(e):"string"==typeof e&&(e=Buffer.from(e,"utf8")),a().createHash("md5").update(e).digest()}),w={randomUUID:a().randomUUID},I=function(e,t,r){if(w.randomUUID&&!t&&!e)return w.randomUUID();let i=(e=e||{}).random||(e.rng||c)();if(i[6]=15&i[6]|64,i[8]=63&i[8]|128,t){r=r||0;for(let e=0;e<16;++e)t[r+e]=i[e];return t}return p(i)},O=_("v5",80,function(e){return Array.isArray(e)?e=Buffer.from(e):"string"==typeof e&&(e=Buffer.from(e,"utf8")),a().createHash("sha1").update(e).digest()}),E="00000000-0000-0000-0000-000000000000",x=function(e){if(!u(e))throw TypeError("Invalid UUID");return parseInt(e.slice(14,15),16)}},8881:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>p});var i=r(3227),n=r(1680),o=r.n(n);r(3677),r(7095);var a=r(5855),s=r(3141);let l=({IDL:e})=>e.Service({createRecord:e.Func([e.Nat64,e.Nat64,e.Int16,e.Text],[e.Record({id:e.Principal,userId:e.Nat64,createdAt:e.Nat64,rate:e.Int16,movieId:e.Nat64,comment:e.Text})],[]),deleteRecord:e.Func([e.Principal],[e.Variant({Ok:e.Record({id:e.Principal,userId:e.Nat64,createdAt:e.Nat64,rate:e.Int16,movieId:e.Nat64,comment:e.Text}),Err:e.Variant({RecordingDoesNotExist:e.Principal,UserDoesNotExist:e.Principal})})],[]),editRecord:e.Func([e.Principal,e.Nat64,e.Nat64,e.Int16,e.Text],[e.Record({id:e.Principal,userId:e.Nat64,createdAt:e.Nat64,rate:e.Int16,movieId:e.Nat64,comment:e.Text})],[]),readRecord:e.Func([e.Principal],[e.Opt(e.Record({id:e.Principal,userId:e.Nat64,createdAt:e.Nat64,rate:e.Int16,movieId:e.Nat64,comment:e.Text}))],["query"])}),c=process.env.CANISTER_ID_BACKEND;c&&((e,t={})=>{let r=t.agent||new s.HttpAgent({...t.agentOptions});return t.agent&&t.agentOptions&&console.warn("Detected both agent and agentOptions passed to createActor. Ignoring agentOptions and proceeding with the provided agent."),"ic"!==process.env.DFX_NETWORK&&r.fetchRootKey().catch(e=>{console.warn("Unable to fetch root key. Check to ensure that your local replica is running"),console.error(e)}),s.Actor.createActor(l,{agent:r,canisterId:e,...t.actorOptions})})(c);var d=r(2978);let u=(0,a.jS)();function f({children:e}){let{identity:t}=(0,d.BM)();return i.jsx(a.Jw,{canisterId:c,context:u,identity:t,idlFactory:l,children:e})}function p({children:e}){return i.jsx("html",{lang:"en",children:i.jsx(d.tV,{children:i.jsx(f,{children:i.jsx("body",{className:o().className,children:e})})})})}(0,a.So)(u)},8692:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>s});var i=r(3227),n=r(649),o=r(3677);function a(){let[e,t]=(0,o.useState)(null),[r,n]=(0,o.useState)(""),[a,s]=(0,o.useState)(""),[l,c]=(0,o.useState)(!1),[d,u]=(0,o.useState)(""),[f,p]=(0,o.useState)(""),[g,y]=(0,o.useState)(!1),h=async()=>{e&&(await e.logout(),c(!1))},v=async()=>{e&&(e.getDelegation({}),c(!0))},m=async()=>{if(e&&e.isAuthenticated){let t=e.getIdentity();n(JSON.stringify(t)),console.log(t)}},_=async()=>{let e=indexedDB.open("nfid-auth-client-db",1),t=new TextEncoder,i={name:"ECDSA",hash:{name:"SHA-256"}};e.onsuccess=function(e){let n=e.target.result.transaction(["ic-keyval"],"readonly").objectStore("ic-keyval").get("identity");n.onerror=function(e){console.error("Ошибка получения объекта:",e.target.errorCode)},n.onsuccess=function(e){let n=e.target.result;if(n){let e=JSON.parse(r),{privateKey:o}=n,a=t.encode(e._principal.__principal__).buffer;window.crypto.subtle.sign(i,o,a).then(e=>{s(Array.from(new Uint8Array(e)).map(e=>e.toString(16).padStart(2,"0")).join(""))})}else console.log("Объект с таким ключом не найден.")}}},b=async()=>{let e=JSON.parse(r),t=new Uint8Array(Buffer.from(f,"hex")),i=new Uint8Array(Buffer.from(d,"hex")),n=new TextEncoder().encode(e._principal.__principal__);try{let e=await crypto.subtle.importKey("spki",t,{name:"ECDSA",namedCurve:"P-256"},!0,["verify"]),r=await crypto.subtle.verify({name:"ECDSA",hash:{name:"SHA-256"}},e,i,n);y(r)}catch(e){y(!1),console.error(e)}};return(0,i.jsxs)("div",{className:"flex flex-col items-center justify-center",children:[i.jsx("div",{children:l?(0,i.jsxs)("div",{className:"flex flex-row gap-20",children:[i.jsx("button",{className:"p-6 bg-red-500 rounded-sm",onClick:h,children:"Logout"}),i.jsx("button",{className:"p-6 bg-green-500 rounded-sm",onClick:m,children:"Get Delegation"}),i.jsx("button",{className:"p-6 bg-blue-500 rounded-sm",onClick:_,children:"Sign"})]}):i.jsx("button",{className:"p-6 bg-blue-500 rounded-sm",onClick:v,children:"Connect NFID"})}),(0,i.jsxs)("div",{className:"flex flex-col gap-6 mt-10",children:[i.jsx("p",{children:"Delegation"}),i.jsx("textarea",{className:"text-black rounded-md w-96 h-32 p-6",disabled:!0,value:r})]}),(0,i.jsxs)("div",{className:"flex flex-col gap-6 mt-10",children:[i.jsx("p",{children:"Signed principal"}),i.jsx("textarea",{className:"text-black rounded-md w-96 h-32 p-6",disabled:!0,value:a})]}),(0,i.jsxs)("div",{className:"flex flex-col gap-6 mt-6 items-center",children:[i.jsx("p",{children:"Compare sign"}),(0,i.jsxs)("div",{className:"flex flex-row gap-6",children:[(0,i.jsxs)("div",{className:"flex flex-col",children:[i.jsx("label",{className:"mb-2 text-white",children:"Sign"}),i.jsx("textarea",{id:"sign",placeholder:"sign",className:"text-black rounded-md w-96 h-32 p-6",value:d,onChange:e=>u(e.target.value)})]}),(0,i.jsxs)("div",{className:"flex flex-col",children:[i.jsx("label",{className:"mb-2",children:"Public Key"}),i.jsx("textarea",{id:"pubkey",placeholder:"public key",className:"text-black rounded-md w-96 h-32 p-6",value:f,onChange:e=>p(e.target.value)})]})]}),i.jsx("button",{className:"p-6 bg-green-500 rounded-sm max-w-24",onClick:b,children:"Verify"}),i.jsx("div",{className:`p-3 text-sm ${g?"bg-green-500":"bg-red-500"}`,children:g?"True":"False"})]})]})}function s(){return(0,i.jsxs)("main",{className:"flex min-h-screen flex-col items-center gap-24 p-24",children:[(0,i.jsxs)("div",{className:"flex flex-row gap-1",children:[i.jsx("div",{children:"NFID test playground or"}),i.jsx(n.default,{href:"/icp",className:"text-blue-500",children:"ICP playground"})]}),i.jsx(a,{})]})}r(1228)},2567:(e,t,r)=>{"use strict";r.r(t),r.d(t,{$$typeof:()=>a,__esModule:()=>o,default:()=>s});var i=r(3189);let n=(0,i.createProxy)(String.raw`/app/src/frontend/app/layout.tsx`),{__esModule:o,$$typeof:a}=n;n.default;let s=(0,i.createProxy)(String.raw`/app/src/frontend/app/layout.tsx#default`)},1254:(e,t,r)=>{"use strict";r.r(t),r.d(t,{$$typeof:()=>a,__esModule:()=>o,default:()=>s});var i=r(3189);let n=(0,i.createProxy)(String.raw`/app/src/frontend/app/page.tsx`),{__esModule:o,$$typeof:a}=n;n.default;let s=(0,i.createProxy)(String.raw`/app/src/frontend/app/page.tsx#default`)},6952:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>n});var i=r(7201);let n=e=>[{type:"image/x-icon",sizes:"16x16",url:(0,i.fillMetadataSegment)(".",e.params,"favicon.ico")+""}]},7095:()=>{},1228:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});let i=r(675);i.__exportStar(r(3509),t),i.__exportStar(r(166),t),i.__exportStar(r(2802),t)},4014:(e,t,r)=>{"use strict";var i;Object.defineProperty(t,"__esModule",{value:!0}),t.NfidAuthClient=t.ERROR_USER_INTERRUPT=t.DelegationType=void 0;let n=r(675),o=r(3141),a=r(3055),s=r(557),l=r(798),c=r(421),d=r(1091),u=r(8951);!function(e){e[e.GLOBAL=0]="GLOBAL",e[e.ANONYMOUS=1]="ANONYMOUS"}(i||(t.DelegationType=i={}));let f="ECDSA",p="Ed25519";t.ERROR_USER_INTERRUPT="UserInterrupt";class g{static create(e={}){var t,r,i;return n.__awaiter(this,void 0,void 0,function*(){let n;console.debug("NfidAuthClient.create",{keyType:e.keyType});let c=null!==(t=e.storage)&&void 0!==t?t:new l.IdbStorage,d=null!==(r=e.keyType)&&void 0!==r?r:f,u=null;if(e.identity)u=e.identity;else{let e=yield c.get(l.KEY_STORAGE_KEY);if(!e&&l.isBrowser)try{let t=new l.LocalStorage,r=yield t.get(l.KEY_STORAGE_DELEGATION),i=yield t.get(l.KEY_STORAGE_KEY);r&&i&&d===f&&(console.log("Discovered an identity stored in localstorage. Migrating to IndexedDB"),yield c.set(l.KEY_STORAGE_DELEGATION,r),yield c.set(l.KEY_STORAGE_KEY,i),e=r,yield t.remove(l.KEY_STORAGE_DELEGATION),yield t.remove(l.KEY_STORAGE_KEY))}catch(e){console.error("error while attempting to recover localstorage: "+e)}if(e)try{"object"==typeof e?u=d===p&&"string"==typeof e?yield s.Ed25519KeyIdentity.fromJSON(e):yield s.ECDSAKeyIdentity.fromKeyPair(e):"string"==typeof e&&(u=s.Ed25519KeyIdentity.fromJSON(e))}catch(e){}}let g=new o.AnonymousIdentity,v=null;if(u)try{let t=yield c.get(l.KEY_STORAGE_DELEGATION);if("object"==typeof t&&null!==t)throw Error("Delegation chain is incorrectly stored. A delegation chain should be stored as a string.");e.identity?g=e.identity:t&&(v=s.DelegationChain.fromJSON(t),(0,s.isDelegationValid)(v)?g=s.DelegationIdentity.fromDelegation(u,v):(yield y(c),u=null))}catch(e){console.error(e),yield y(c),u=null}return(null===(i=e.idleOptions)||void 0===i?void 0:i.disableIdle)?n=void 0:(v||e.identity)&&(n=a.IdleManager.create(e.idleOptions)),u||(u=yield h(c,d,e.storage)),new this(g,u,v,c,n,e)})}constructor(e,t,r,i,n,o){var a;this._identity=e,this._key=t,this._chain=r,this._storage=i,this.idleManager=n,this._createOptions=o;let s=this.logout.bind(this),l=null==o?void 0:o.idleOptions;(null==l?void 0:l.onIdle)||(null==l?void 0:l.disableDefaultIdleCallback)||null===(a=this.idleManager)||void 0===a||a.registerCallback(()=>{s(),location.reload()})}getKey(){var e,t;return n.__awaiter(this,void 0,void 0,function*(){return h(this._storage,null===(e=this._createOptions)||void 0===e?void 0:e.keyType,null===(t=this._createOptions)||void 0===t?void 0:t.storage)})}getDelegationType(){var e,t;return(null===(t=null===(e=this._chain)||void 0===e?void 0:e.delegations[0].delegation.targets)||void 0===t?void 0:t.length)?i.GLOBAL:i.ANONYMOUS}renewDelegation(e){var t,r;return n.__awaiter(this,void 0,void 0,function*(){console.debug("NfidAuthClient.renewDelegation");let i=BigInt(8)*BigInt(36e11),n=(0,c.getIframe)(),o=yield(0,d.request)(n,{method:"ic_renewDelegation",params:[{sessionPublicKey:new Uint8Array(null===(t=this._key)||void 0===t?void 0:t.getPublicKey().toDer()),maxTimeToLive:null!==(r=null==e?void 0:e.maxTimeToLive)&&void 0!==r?r:i,targets:null==e?void 0:e.targets,derivationOrigin:null==e?void 0:e.derivationOrigin}]});if("error"in o)throw Error(o.error.message);return this._handleSuccess(o.result)})}login(e){var t;return n.__awaiter(this,void 0,void 0,function*(){this._key||(this._key=yield this.getKey());let r=BigInt(8)*BigInt(36e11),i=null==e?void 0:e.targets,n=null==e?void 0:e.derivationOrigin,o=(0,c.getIframe)(),a=yield(0,d.request)(o,{method:"ic_getDelegation",params:[Object.assign(Object.assign({sessionPublicKey:new Uint8Array(this._key.getPublicKey().toDer()),maxTimeToLive:null!==(t=null==e?void 0:e.maxTimeToLive)&&void 0!==t?t:r},i?{targets:i}:{}),n?{derivationOrigin:n}:{})]});if("error"in a)throw Error(a.error.message);return this._handleSuccess(a.result)})}logout(e={}){return n.__awaiter(this,void 0,void 0,function*(){if(yield y(this._storage),this._identity=new o.AnonymousIdentity,this._key=null,this._chain=null,e.returnTo)try{window.history.pushState({},"",e.returnTo)}catch(t){window.location.href=e.returnTo}})}getIdentity(){return this._identity}get isAuthenticated(){return!this.getIdentity().getPrincipal().isAnonymous()&&null!==this._chain}_handleSuccess(e){var t,r;return n.__awaiter(this,void 0,void 0,function*(){let i=e.delegations.map(e=>{var t;return{delegation:new s.Delegation(e.delegation.pubkey,e.delegation.expiration,null===(t=e.delegation.targets)||void 0===t?void 0:t.map(e=>u.Principal.fromText(e))),signature:e.signature.buffer}});console.debug("NfidAuthClient._handleSuccess",{delegations:i});let n=s.DelegationChain.fromDelegations(i,e.userPublicKey.buffer),o=this._key;if(!o)throw Error("missing key");this._chain=n;let c=s.DelegationIdentity.fromDelegation(o,this._chain);if(this._identity=c,!this.idleManager){let e=null===(t=this._createOptions)||void 0===t?void 0:t.idleOptions;this.idleManager=a.IdleManager.create(e),(null==e?void 0:e.onIdle)||(null==e?void 0:e.disableDefaultIdleCallback)||null===(r=this.idleManager)||void 0===r||r.registerCallback(()=>{this.logout(),location.reload()})}return this._chain&&(yield this._storage.set(l.KEY_STORAGE_DELEGATION,JSON.stringify(this._chain.toJSON()))),c})}}function y(e){return n.__awaiter(this,void 0,void 0,function*(){yield e.remove(l.KEY_STORAGE_KEY),yield e.remove(l.KEY_STORAGE_DELEGATION),yield e.remove(l.KEY_VECTOR)})}function h(e,t,r){return n.__awaiter(this,void 0,void 0,function*(){let i;return console.debug("getKey",{keyType:t}),t===p?(i=yield s.Ed25519KeyIdentity.generate(null),yield e.set(l.KEY_STORAGE_KEY,JSON.stringify(i.toJSON()))):(r&&t===f&&console.warn(`You are using a custom storage provider that may not support CryptoKey storage. If you are using a custom storage provider that does not support CryptoKey storage, you should use '${p}' as the key type, as it can serialize to a string`),i=yield s.ECDSAKeyIdentity.generate(),yield e.set(l.KEY_STORAGE_KEY,i.getKeyPair())),i})}t.NfidAuthClient=g},7724:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.IdbKeyVal=void 0;let i=r(675),n=r(8954),o=r(798),a="nfid-auth-client-db",s="ic-keyval",l=(e=a,t=s,r)=>i.__awaiter(void 0,void 0,void 0,function*(){return o.isBrowser&&(null==localStorage?void 0:localStorage.getItem(o.KEY_STORAGE_DELEGATION))&&(localStorage.removeItem(o.KEY_STORAGE_DELEGATION),localStorage.removeItem(o.KEY_STORAGE_KEY)),yield(0,n.openDB)(e,r,{upgrade:e=>{e.objectStoreNames,e.objectStoreNames.contains(t)&&e.clear(t),e.createObjectStore(t)}})});class c{static create(e){return i.__awaiter(this,void 0,void 0,function*(){let{dbName:t=a,storeName:r=s,version:i=1}=null!=e?e:{};return new c((yield l(t,r,i)),r)})}constructor(e,t){this._db=e,this._storeName=t}set(e,t){return i.__awaiter(this,void 0,void 0,function*(){return yield function(e,t,r,n){return i.__awaiter(this,void 0,void 0,function*(){return yield e.put(t,n,r)})}(this._db,this._storeName,e,t)})}get(e){var t;return i.__awaiter(this,void 0,void 0,function*(){return null!==(t=yield function(e,t,r){return i.__awaiter(this,void 0,void 0,function*(){return yield e.get(t,r)})}(this._db,this._storeName,e))&&void 0!==t?t:null})}remove(e){return i.__awaiter(this,void 0,void 0,function*(){return yield function(e,t,r){return i.__awaiter(this,void 0,void 0,function*(){return yield e.delete(t,r)})}(this._db,this._storeName,e)})}}t.IdbKeyVal=c},2802:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),r(675).__exportStar(r(4014),t)},798:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.IdbStorage=t.LocalStorage=t.isBrowser=t.DB_VERSION=t.KEY_VECTOR=t.KEY_STORAGE_DELEGATION=t.KEY_STORAGE_KEY=void 0;let i=r(675),n=r(7724);t.KEY_STORAGE_KEY="identity",t.KEY_STORAGE_DELEGATION="delegation",t.KEY_VECTOR="iv",t.DB_VERSION=1,t.isBrowser="undefined"!=typeof window;class o{constructor(e="ic-",t){this.prefix=e,this._localStorage=t}get(e){return Promise.resolve(this._getLocalStorage().getItem(this.prefix+e))}set(e,t){return this._getLocalStorage().setItem(this.prefix+e,t),Promise.resolve()}remove(e){return this._getLocalStorage().removeItem(this.prefix+e),Promise.resolve()}_getLocalStorage(){if(this._localStorage)return this._localStorage;let e="undefined"==typeof window?"undefined"==typeof global?"undefined"==typeof self?void 0:self.localStorage:global.localStorage:window.localStorage;if(!e)throw Error("Could not find local storage.");return e}}t.LocalStorage=o;class a{get _db(){return new Promise(e=>{if(this.initializedDb){e(this.initializedDb);return}n.IdbKeyVal.create({version:t.DB_VERSION}).then(t=>{this.initializedDb=t,e(t)})})}get(e){return i.__awaiter(this,void 0,void 0,function*(){let t=yield this._db;return yield t.get(e)})}set(e,t){return i.__awaiter(this,void 0,void 0,function*(){let r=yield this._db;yield r.set(e,t)})}remove(e){return i.__awaiter(this,void 0,void 0,function*(){let t=yield this._db;yield t.remove(e)})}}t.IdbStorage=a},748:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.IFRAME_ID=void 0,t.IFRAME_ID="nfid-embed"},421:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getIframe=void 0;let i=r(748);t.getIframe=()=>{let e=document.getElementById(i.IFRAME_ID);if(!e||!e.contentWindow)throw Error("nfid iframe not initialized");return e}},1512:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.buildIframe=t.baseStyle=void 0;let i=r(748),n=r(421);t.baseStyle={position:"fixed",top:"0",left:"0",border:"none",width:"100%",height:"100%",zIndex:"9999",background:"rgba(9,10,19,0.5)",display:"none"};let o=e=>(console.debug("buildQuery",{params:e}),Object.keys(e).filter(t=>!!e[t]).length?Object.keys(e).reduce((t,r,i)=>`${t}${0===i?"?":"&"}${r}=${e[r]}`,""):"");t.buildIframe=({origin:e,applicationLogo:r,applicationName:a,onLoad:s})=>{let l;console.debug("buildIframe");let c=o({applicationLogo:r,applicationName:a}),d="embed",u=new URL(`${e}/${d}${c}`);console.debug("buildIframe",{PROVIDER_URL:u,QUERY:c,PATH:d});try{l=(0,n.getIframe)()}catch(e){l=document.createElement("iframe")}return l.id=i.IFRAME_ID,l.src=u.href,l.allow="publickey-credentials-get",Object.assign(l.style,t.baseStyle),l.onload=s,document.body.appendChild(l),l}},3509:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.IframeManager=void 0;let i=r(1512);class n{static init({providerUrl:e,onLoad:t}){console.debug("IframeManager.constructor",{providerUrl:e}),n._iframe=(0,i.buildIframe)({origin:e,onLoad:t})}static show(){if(!this._iframe)throw Error("IframeManager not initialized");Object.assign(this._iframe.style,Object.assign(Object.assign({},i.baseStyle),{display:"block"}))}static hide(){if(!this._iframe)throw Error("IframeManager not initialized");Object.assign(this._iframe.style,Object.assign(Object.assign({},i.baseStyle),{display:"none"}))}static isVisible(){return!1}}t.IframeManager=n},3661:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.hideIframe=t.showIframe=t.mountIframe=void 0;let i=r(675),n=r(421),o=r(1512);t.mountIframe=({iframe:e,onLoad:t})=>i.__awaiter(void 0,void 0,void 0,function*(){console.debug("mountIframe",{iframe:e}),window.document.body.appendChild(e),e.onload=t}),t.showIframe=()=>{let e=(0,n.getIframe)();e&&(console.debug("showIframe",{iframe:e}),Object.assign(e.style,Object.assign(Object.assign({},o.baseStyle),{display:"block"})))},t.hideIframe=()=>{let e=(0,n.getIframe)();e&&(console.debug("hideIframe",{iframe:e}),Object.assign(e.style,Object.assign(Object.assign({},o.baseStyle),{display:"none"})))}},166:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NFID=void 0;let i=r(675),n=r(1512),o=r(3661),a=r(2802),s=r(421),l=r(1091);class c{constructor(e){this._nfidConfig=e,console.debug("NFID.constructor",{_nfidConfig:e})}static initIframe(e){return i.__awaiter(this,void 0,void 0,function*(){return console.debug("NFID.initIframe",{nfidConfig:e}),new Promise(t=>{var r,i;let o=(0,n.buildIframe)({origin:e.origin,applicationName:null===(r=e.application)||void 0===r?void 0:r.name,applicationLogo:null===(i=e.application)||void 0===i?void 0:i.logo,onLoad:()=>{c.isIframeInstantiated=!0,c.nfidIframe=o,console.debug("NFID.initIframe: iframe loaded",{nfidIframe:o}),t(!0)}})})})}static init(e){return i.__awaiter(this,void 0,void 0,function*(){let{origin:t="https://nfid.one"}=e,r=i.__rest(e,["origin"]);return yield new Promise((e,i)=>{let n=()=>{window.removeEventListener("message",s)},o=setTimeout(()=>{n(),i(Error("NFID.init iframe did not respond in time"))},3e4),s=i=>{"nfid_ready"===i.data.type&&(n(),console.debug("NFID.init authClient initiated"),clearTimeout(o),e(new this(Object.assign({origin:t},r))))};window.addEventListener("message",s),console.debug("NFID.init",Object.assign({origin:t},r)),c.initIframe(Object.assign({origin:t},r)),console.debug("NFID.init iframe initiated"),a.NfidAuthClient.create({identity:r.identity,storage:r.storage,keyType:r.keyType,idleOptions:r.idleOptions}).then(e=>{c._authClient=e})})})}getDelegation(e){var t,r;return i.__awaiter(this,void 0,void 0,function*(){console.debug("NFID.connect");let i=(null==e?void 0:e.derivationOrigin)||(null===(r=null===(t=this._nfidConfig)||void 0===t?void 0:t.ic)||void 0===r?void 0:r.derivationOrigin);if(!c.isIframeInstantiated)throw Error("NFID iframe not instantiated");return(0,o.showIframe)(),new Promise((t,r)=>{c._authClient.login(Object.assign(Object.assign({},e),{derivationOrigin:i})).then(e=>t(e)).catch(e=>r({error:e.message})).finally(o.hideIframe)})})}updateGlobalDelegation(e){var t,r;return i.__awaiter(this,void 0,void 0,function*(){let i=(null==e?void 0:e.derivationOrigin)||(null===(r=null===(t=this._nfidConfig)||void 0===t?void 0:t.ic)||void 0===r?void 0:r.derivationOrigin);if(console.debug("NFID.renewDelegation"),c._authClient.getDelegationType()===a.DelegationType.ANONYMOUS)throw Error("You can not update delegation from anonymous user");let n=yield c._authClient.renewDelegation(Object.assign(Object.assign({},e),{derivationOrigin:i}));if("error"in n)throw Error(n.error.message);return n})}getDelegationType(){return c._authClient.getDelegationType()}logout(){return i.__awaiter(this,void 0,void 0,function*(){return c._authClient.logout()})}requestTransferFT(e){var t,r;return i.__awaiter(this,void 0,void 0,function*(){console.debug("NFID.requestTransferFT");let i=(null==e?void 0:e.derivationOrigin)||(null===(r=null===(t=this._nfidConfig)||void 0===t?void 0:t.ic)||void 0===r?void 0:r.derivationOrigin);if(c._authClient.getDelegationType()===a.DelegationType.ANONYMOUS)throw Error("You can not call requestTransferFT from anonymous user");if(!c.nfidIframe)throw Error("NFID iframe not instantiated");(0,o.showIframe)();let n=(0,s.getIframe)(),d=yield(0,l.request)(n,{method:"ic_requestTransfer",params:[{receiver:e.receiver,amount:e.amount,memo:e.memo,derivationOrigin:i}]});if((0,o.hideIframe)(),"error"in d)throw Error(d.error.message);return d.result})}requestTransferNFT(e){var t,r;return i.__awaiter(this,void 0,void 0,function*(){console.debug("NFID.requestTransferNFT");let i=(null==e?void 0:e.derivationOrigin)||(null===(r=null===(t=this._nfidConfig)||void 0===t?void 0:t.ic)||void 0===r?void 0:r.derivationOrigin);if(c._authClient.getDelegationType()===a.DelegationType.ANONYMOUS)throw Error("You can not call requestTransferNFT from anonymous user");if(!c.nfidIframe)throw Error("NFID iframe not instantiated");(0,o.showIframe)();let n=(0,s.getIframe)(),d=yield(0,l.request)(n,{method:"ic_requestTransfer",params:[{receiver:e.receiver,tokenId:e.tokenId,derivationOrigin:i}]});if((0,o.hideIframe)(),"error"in d)throw Error(d.error.message);return d.result})}requestCanisterCall({method:e,canisterId:t,parameters:r,derivationOrigin:n}){var d,u;return i.__awaiter(this,void 0,void 0,function*(){if(console.debug("NFID.requestCanisterCall",{method:e,canisterId:t,parameters:r,derivationOrigin:n}),c._authClient.getDelegationType()===a.DelegationType.ANONYMOUS)throw Error("You can not call requestCanisterCall from anonymous user");if(!c.nfidIframe)throw Error("NFID iframe not instantiated");(0,o.showIframe)();let i=(0,s.getIframe)(),f=yield(0,l.request)(i,{method:"ic_canisterCall",params:[{method:e,canisterId:t,parameters:r,derivationOrigin:n||(null===(u=null===(d=this._nfidConfig)||void 0===d?void 0:d.ic)||void 0===u?void 0:u.derivationOrigin)}]});if((0,o.hideIframe)(),"error"in f)throw Error(f.error.message);return f.result})}get isAuthenticated(){return c._authClient.isAuthenticated}getIdentity(){return c._authClient.getIdentity()}}t.NFID=c,c.isIframeInstantiated=!1},1091:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.request=t.RPC_BASE=void 0;let i=r(675),n=r(2641);t.RPC_BASE={jsonrpc:"2.0"};class o extends Error{constructor(e,t,r){super(e),this.code=t,this.data=r}}t.request=function(e,{method:t,params:r},a={}){return i.__awaiter(this,void 0,void 0,function*(){let i=n.v4(),s={jsonrpc:"2.0",id:i,method:t,params:r,options:a};return console.debug("postmsg-rpc request",Object.assign({},s)),new Promise((t,r)=>{let n=a.timeout&&setTimeout(()=>{window.removeEventListener("message",l),r(new o("Request timed out",408))},a.timeout),l=e=>{e.data&&e.data.id===i&&(console.debug(`resolve id: ${i}`,{event:e}),t(e.data),window.removeEventListener("message",l),n&&clearTimeout(n))};window.addEventListener("message",l),e.contentWindow.postMessage(s,"*")})})}},675:(e,t,r)=>{"use strict";r.r(t),r.d(t,{__addDisposableResource:()=>R,__assign:()=>o,__asyncDelegator:()=>x,__asyncGenerator:()=>E,__asyncValues:()=>S,__await:()=>O,__awaiter:()=>g,__classPrivateFieldGet:()=>A,__classPrivateFieldIn:()=>C,__classPrivateFieldSet:()=>P,__createBinding:()=>h,__decorate:()=>s,__disposeResources:()=>K,__esDecorate:()=>c,__exportStar:()=>v,__extends:()=>n,__generator:()=>y,__importDefault:()=>D,__importStar:()=>T,__makeTemplateObject:()=>N,__metadata:()=>p,__param:()=>l,__propKey:()=>u,__read:()=>_,__rest:()=>a,__runInitializers:()=>d,__setFunctionName:()=>f,__spread:()=>b,__spreadArray:()=>I,__spreadArrays:()=>w,__values:()=>m,default:()=>M});var i=function(e,t){return(i=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)};function n(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}var o=function(){return(o=Object.assign||function(e){for(var t,r=1,i=arguments.length;r<i;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}).apply(this,arguments)};function a(e,t){var r={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&0>t.indexOf(i)&&(r[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var n=0,i=Object.getOwnPropertySymbols(e);n<i.length;n++)0>t.indexOf(i[n])&&Object.prototype.propertyIsEnumerable.call(e,i[n])&&(r[i[n]]=e[i[n]]);return r}function s(e,t,r,i){var n,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,r):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,i);else for(var s=e.length-1;s>=0;s--)(n=e[s])&&(a=(o<3?n(a):o>3?n(t,r,a):n(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a}function l(e,t){return function(r,i){t(r,i,e)}}function c(e,t,r,i,n,o){function a(e){if(void 0!==e&&"function"!=typeof e)throw TypeError("Function expected");return e}for(var s,l=i.kind,c="getter"===l?"get":"setter"===l?"set":"value",d=!t&&e?i.static?e:e.prototype:null,u=t||(d?Object.getOwnPropertyDescriptor(d,i.name):{}),f=!1,p=r.length-1;p>=0;p--){var g={};for(var y in i)g[y]="access"===y?{}:i[y];for(var y in i.access)g.access[y]=i.access[y];g.addInitializer=function(e){if(f)throw TypeError("Cannot add initializers after decoration has completed");o.push(a(e||null))};var h=(0,r[p])("accessor"===l?{get:u.get,set:u.set}:u[c],g);if("accessor"===l){if(void 0===h)continue;if(null===h||"object"!=typeof h)throw TypeError("Object expected");(s=a(h.get))&&(u.get=s),(s=a(h.set))&&(u.set=s),(s=a(h.init))&&n.unshift(s)}else(s=a(h))&&("field"===l?n.unshift(s):u[c]=s)}d&&Object.defineProperty(d,i.name,u),f=!0}function d(e,t,r){for(var i=arguments.length>2,n=0;n<t.length;n++)r=i?t[n].call(e,r):t[n].call(e);return i?r:void 0}function u(e){return"symbol"==typeof e?e:"".concat(e)}function f(e,t,r){return"symbol"==typeof t&&(t=t.description?"[".concat(t.description,"]"):""),Object.defineProperty(e,"name",{configurable:!0,value:r?"".concat(r," ",t):t})}function p(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}function g(e,t,r,i){return new(r||(r=Promise))(function(n,o){function a(e){try{l(i.next(e))}catch(e){o(e)}}function s(e){try{l(i.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?n(e.value):((t=e.value)instanceof r?t:new r(function(e){e(t)})).then(a,s)}l((i=i.apply(e,t||[])).next())})}function y(e,t){var r,i,n,o,a={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(s){return function(l){return function(s){if(r)throw TypeError("Generator is already executing.");for(;o&&(o=0,s[0]&&(a=0)),a;)try{if(r=1,i&&(n=2&s[0]?i.return:s[0]?i.throw||((n=i.return)&&n.call(i),0):i.next)&&!(n=n.call(i,s[1])).done)return n;switch(i=0,n&&(s=[2&s[0],n.value]),s[0]){case 0:case 1:n=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,i=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!(n=(n=a.trys).length>0&&n[n.length-1])&&(6===s[0]||2===s[0])){a=0;continue}if(3===s[0]&&(!n||s[1]>n[0]&&s[1]<n[3])){a.label=s[1];break}if(6===s[0]&&a.label<n[1]){a.label=n[1],n=s;break}if(n&&a.label<n[2]){a.label=n[2],a.ops.push(s);break}n[2]&&a.ops.pop(),a.trys.pop();continue}s=t.call(e,a)}catch(e){s=[6,e],i=0}finally{r=n=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,l])}}}var h=Object.create?function(e,t,r,i){void 0===i&&(i=r);var n=Object.getOwnPropertyDescriptor(t,r);(!n||("get"in n?!t.__esModule:n.writable||n.configurable))&&(n={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,i,n)}:function(e,t,r,i){void 0===i&&(i=r),e[i]=t[r]};function v(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||h(t,e,r)}function m(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],i=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&i>=e.length&&(e=void 0),{value:e&&e[i++],done:!e}}};throw TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function _(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var i,n,o=r.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(i=o.next()).done;)a.push(i.value)}catch(e){n={error:e}}finally{try{i&&!i.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}return a}function b(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(_(arguments[t]));return e}function w(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;for(var i=Array(e),n=0,t=0;t<r;t++)for(var o=arguments[t],a=0,s=o.length;a<s;a++,n++)i[n]=o[a];return i}function I(e,t,r){if(r||2==arguments.length)for(var i,n=0,o=t.length;n<o;n++)!i&&n in t||(i||(i=Array.prototype.slice.call(t,0,n)),i[n]=t[n]);return e.concat(i||Array.prototype.slice.call(t))}function O(e){return this instanceof O?(this.v=e,this):new O(e)}function E(e,t,r){if(!Symbol.asyncIterator)throw TypeError("Symbol.asyncIterator is not defined.");var i,n=r.apply(e,t||[]),o=[];return i={},a("next"),a("throw"),a("return"),i[Symbol.asyncIterator]=function(){return this},i;function a(e){n[e]&&(i[e]=function(t){return new Promise(function(r,i){o.push([e,t,r,i])>1||s(e,t)})})}function s(e,t){try{var r;(r=n[e](t)).value instanceof O?Promise.resolve(r.value.v).then(l,c):d(o[0][2],r)}catch(e){d(o[0][3],e)}}function l(e){s("next",e)}function c(e){s("throw",e)}function d(e,t){e(t),o.shift(),o.length&&s(o[0][0],o[0][1])}}function x(e){var t,r;return t={},i("next"),i("throw",function(e){throw e}),i("return"),t[Symbol.iterator]=function(){return this},t;function i(i,n){t[i]=e[i]?function(t){return(r=!r)?{value:O(e[i](t)),done:!1}:n?n(t):t}:n}}function S(e){if(!Symbol.asyncIterator)throw TypeError("Symbol.asyncIterator is not defined.");var t,r=e[Symbol.asyncIterator];return r?r.call(e):(e=m(e),t={},i("next"),i("throw"),i("return"),t[Symbol.asyncIterator]=function(){return this},t);function i(r){t[r]=e[r]&&function(t){return new Promise(function(i,n){(function(e,t,r,i){Promise.resolve(i).then(function(t){e({value:t,done:r})},t)})(i,n,(t=e[r](t)).done,t.value)})}}}function N(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}var j=Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t};function T(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&h(t,e,r);return j(t,e),t}function D(e){return e&&e.__esModule?e:{default:e}}function A(e,t,r,i){if("a"===r&&!i)throw TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!i:!t.has(e))throw TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?i:"a"===r?i.call(e):i?i.value:t.get(e)}function P(e,t,r,i,n){if("m"===i)throw TypeError("Private method is not writable");if("a"===i&&!n)throw TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!n:!t.has(e))throw TypeError("Cannot write private member to an object whose class did not declare it");return"a"===i?n.call(e,r):n?n.value=r:t.set(e,r),r}function C(e,t){if(null===t||"object"!=typeof t&&"function"!=typeof t)throw TypeError("Cannot use 'in' operator on non-object");return"function"==typeof e?t===e:e.has(t)}function R(e,t,r){if(null!=t){var i;if("object"!=typeof t&&"function"!=typeof t)throw TypeError("Object expected.");if(r){if(!Symbol.asyncDispose)throw TypeError("Symbol.asyncDispose is not defined.");i=t[Symbol.asyncDispose]}if(void 0===i){if(!Symbol.dispose)throw TypeError("Symbol.dispose is not defined.");i=t[Symbol.dispose]}if("function"!=typeof i)throw TypeError("Object not disposable.");e.stack.push({value:t,dispose:i,async:r})}else r&&e.stack.push({async:!0});return t}var k="function"==typeof SuppressedError?SuppressedError:function(e,t,r){var i=Error(r);return i.name="SuppressedError",i.error=e,i.suppressed=t,i};function K(e){function t(t){e.error=e.hasError?new k(t,e.error,"An error was suppressed during disposal."):t,e.hasError=!0}return function r(){for(;e.stack.length;){var i=e.stack.pop();try{var n=i.dispose&&i.dispose.call(i.value);if(i.async)return Promise.resolve(n).then(r,function(e){return t(e),r()})}catch(e){t(e)}}if(e.hasError)throw e.error}()}let M={__extends:n,__assign:o,__rest:a,__decorate:s,__param:l,__metadata:p,__awaiter:g,__generator:y,__createBinding:h,__exportStar:v,__values:m,__read:_,__spread:b,__spreadArrays:w,__spreadArray:I,__await:O,__asyncGenerator:E,__asyncDelegator:x,__asyncValues:S,__makeTemplateObject:N,__importStar:T,__importDefault:D,__classPrivateFieldGet:A,__classPrivateFieldSet:P,__classPrivateFieldIn:C,__addDisposableResource:R,__disposeResources:K}}};var t=require("../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),i=t.X(0,[522,767,404],()=>r(6267));module.exports=i})();