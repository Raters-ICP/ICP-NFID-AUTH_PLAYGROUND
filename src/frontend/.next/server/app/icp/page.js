(()=>{var e={};e.id=438,e.ids=[438],e.modules={7849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},5403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},4749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},4300:e=>{"use strict";e.exports=require("buffer")},6005:e=>{"use strict";e.exports=require("node:crypto")},1017:e=>{"use strict";e.exports=require("path")},5034:e=>{"use strict";e.exports=require("url")},1438:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>i.a,__next_app__:()=>u,originalPathname:()=>p,pages:()=>d,routeModule:()=>x,tree:()=>c}),r(5366),r(2567),r(7824);var a=r(3282),n=r(5736),s=r(3906),i=r.n(s),o=r(6880),l={};for(let e in o)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>o[e]);r.d(t,l);let c=["",{children:["icp",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,5366)),"/app/src/frontend/app/icp/page.tsx"]}]},{metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,6952))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(r.bind(r,2567)),"/app/src/frontend/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,7824,23)),"next/dist/client/components/not-found-error"],metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,6952))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],d=["/app/src/frontend/app/icp/page.tsx"],p="/icp/page",u={require:r,loadChunk:()=>Promise.resolve()},x=new a.AppPageRouteModule({definition:{kind:n.x.APP_PAGE,page:"/icp/page",pathname:"/icp",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},9182:(e,t,r)=>{Promise.resolve().then(r.t.bind(r,4424,23)),Promise.resolve().then(r.t.bind(r,7752,23)),Promise.resolve().then(r.t.bind(r,5275,23)),Promise.resolve().then(r.t.bind(r,9842,23)),Promise.resolve().then(r.t.bind(r,1633,23)),Promise.resolve().then(r.t.bind(r,9224,23))},9279:(e,t,r)=>{Promise.resolve().then(r.bind(r,7995))},9942:(e,t,r)=>{Promise.resolve().then(r.bind(r,8881))},7995:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>l});var a=r(3227),n=r(3677),s=r(2978);function i(){let{isLoggingIn:e,login:t,clear:r,identity:i,loginStatus:o}=(0,s.BM)(),[l,c]=(0,n.useState)(""),[d,p]=(0,n.useState)(""),[u,x]=(0,n.useState)(""),[m,g]=(0,n.useState)(""),[h,f]=(0,n.useState)(""),[v,b]=(0,n.useState)(!1),y=async()=>{if(i){let{privateKey:e}=i._inner._keyPair,t=i.getPrincipal()._arr;window.crypto.subtle.sign({name:"ECDSA",hash:{name:"SHA-256"}},e,t).then(e=>{f(Array.from(new Uint8Array(e)).map(e=>e.toString(16).padStart(2,"0")).join(""))})}else console.log("Объект с таким ключом не найден.")},N=async()=>{if(i){let e=new Uint8Array(Buffer.from(u,"hex")),t=new Uint8Array(Buffer.from(d,"hex")),r=i._principal._arr;try{let a=await crypto.subtle.importKey("spki",e,{name:"ECDSA",namedCurve:"P-256"},!0,["verify"]),n=await crypto.subtle.verify({name:"ECDSA",hash:{name:"SHA-256"}},a,t,r);b(n)}catch(e){b(!1),console.error(e)}}};return(0,a.jsxs)("div",{className:"flex flex-col items-center justify-center",children:[a.jsx("div",{children:i?(0,a.jsxs)("div",{className:"flex flex-row gap-20",children:[a.jsx("button",{className:"p-6 bg-red-500 rounded-sm",onClick:()=>{i&&(c(""),r())},children:"Logout"}),a.jsx("button",{className:"p-6 bg-green-500 rounded-sm",onClick:()=>{if(i){let e=i._delegation;e?c(JSON.stringify(e)):console.error("Delegation is undefined")}else console.error("Identity is undefined or null")},children:"Get Delegation"}),a.jsx("button",{className:"p-6 bg-blue-500 rounded-sm",onClick:y,children:"Sign"})]}):a.jsx("button",{className:"p-6 bg-blue-500 rounded-sm",onClick:t,children:"Connect ICP"})}),(0,a.jsxs)("div",{className:"flex flex-col gap-6 mt-10",children:[a.jsx("p",{children:"Delegation"}),a.jsx("textarea",{value:l,className:"text-black rounded-md w-96 h-32 p-6",disabled:!0})]}),(0,a.jsxs)("div",{className:"flex flex-col gap-6 mt-10",children:[a.jsx("p",{children:"Signed principal"}),a.jsx("textarea",{className:"text-black rounded-md w-96 h-32 p-6",disabled:!0,value:h})]}),(0,a.jsxs)("div",{className:"flex flex-col gap-6 mt-6 items-center",children:[a.jsx("p",{children:"Compare sign"}),(0,a.jsxs)("div",{className:"flex flex-row gap-6",children:[(0,a.jsxs)("div",{className:"flex flex-col",children:[a.jsx("label",{className:"mb-2 text-white",children:"Sign"}),a.jsx("textarea",{id:"sign",placeholder:"sign",className:"text-black rounded-md w-96 h-32 p-6",value:d,onChange:e=>p(e.target.value)})]}),(0,a.jsxs)("div",{className:"flex flex-col",children:[a.jsx("label",{className:"mb-2",children:"Public Key"}),a.jsx("textarea",{id:"pubkey",placeholder:"public key",className:"text-black rounded-md w-96 h-32 p-6",value:u,onChange:e=>x(e.target.value)})]})]}),a.jsx("button",{className:"p-6 bg-green-500 rounded-sm max-w-24",onClick:N,children:"Verify"}),a.jsx("div",{className:`p-3 text-sm ${v?"bg-green-500":"bg-red-500"}`,children:v?"True":"False"})]})]})}var o=r(649);function l(){return(0,a.jsxs)("main",{className:"flex min-h-screen flex-col items-center gap-24 p-24",children:[(0,a.jsxs)("div",{className:"flex flex-row gap-1",children:[a.jsx("div",{children:"ICP test playground or"}),a.jsx(o.default,{href:"/",className:"text-blue-500",children:"NFID playground"})]}),a.jsx(i,{})]})}},8881:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>x});var a=r(3227),n=r(1680),s=r.n(n);r(3677),r(7095);var i=r(5855),o=r(3141);let l=({IDL:e})=>e.Service({createRecord:e.Func([e.Nat64,e.Nat64,e.Int16,e.Text],[e.Record({id:e.Principal,userId:e.Nat64,createdAt:e.Nat64,rate:e.Int16,movieId:e.Nat64,comment:e.Text})],[]),deleteRecord:e.Func([e.Principal],[e.Variant({Ok:e.Record({id:e.Principal,userId:e.Nat64,createdAt:e.Nat64,rate:e.Int16,movieId:e.Nat64,comment:e.Text}),Err:e.Variant({RecordingDoesNotExist:e.Principal,UserDoesNotExist:e.Principal})})],[]),editRecord:e.Func([e.Principal,e.Nat64,e.Nat64,e.Int16,e.Text],[e.Record({id:e.Principal,userId:e.Nat64,createdAt:e.Nat64,rate:e.Int16,movieId:e.Nat64,comment:e.Text})],[]),readRecord:e.Func([e.Principal],[e.Opt(e.Record({id:e.Principal,userId:e.Nat64,createdAt:e.Nat64,rate:e.Int16,movieId:e.Nat64,comment:e.Text}))],["query"])}),c=process.env.CANISTER_ID_BACKEND;c&&((e,t={})=>{let r=t.agent||new o.HttpAgent({...t.agentOptions});return t.agent&&t.agentOptions&&console.warn("Detected both agent and agentOptions passed to createActor. Ignoring agentOptions and proceeding with the provided agent."),"ic"!==process.env.DFX_NETWORK&&r.fetchRootKey().catch(e=>{console.warn("Unable to fetch root key. Check to ensure that your local replica is running"),console.error(e)}),o.Actor.createActor(l,{agent:r,canisterId:e,...t.actorOptions})})(c);var d=r(2978);let p=(0,i.jS)();function u({children:e}){let{identity:t}=(0,d.BM)();return a.jsx(i.Jw,{canisterId:c,context:p,identity:t,idlFactory:l,children:e})}function x({children:e}){return a.jsx("html",{lang:"en",children:a.jsx(d.tV,{children:a.jsx(u,{children:a.jsx("body",{className:s().className,children:e})})})})}(0,i.So)(p)},5366:(e,t,r)=>{"use strict";r.r(t),r.d(t,{$$typeof:()=>i,__esModule:()=>s,default:()=>o});var a=r(3189);let n=(0,a.createProxy)(String.raw`/app/src/frontend/app/icp/page.tsx`),{__esModule:s,$$typeof:i}=n;n.default;let o=(0,a.createProxy)(String.raw`/app/src/frontend/app/icp/page.tsx#default`)},2567:(e,t,r)=>{"use strict";r.r(t),r.d(t,{$$typeof:()=>i,__esModule:()=>s,default:()=>o});var a=r(3189);let n=(0,a.createProxy)(String.raw`/app/src/frontend/app/layout.tsx`),{__esModule:s,$$typeof:i}=n;n.default;let o=(0,a.createProxy)(String.raw`/app/src/frontend/app/layout.tsx#default`)},6952:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>n});var a=r(7201);let n=e=>[{type:"image/x-icon",sizes:"16x16",url:(0,a.fillMetadataSegment)(".",e.params,"favicon.ico")+""}]},7095:()=>{}};var t=require("../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),a=t.X(0,[522,767,404],()=>r(1438));module.exports=a})();