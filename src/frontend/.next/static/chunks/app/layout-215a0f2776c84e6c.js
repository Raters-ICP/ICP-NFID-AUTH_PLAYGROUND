(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[185],{7766:function(t,e,n){Promise.resolve().then(n.bind(n,937))},3875:function(t,e,n){"use strict";var r,i;t.exports=(null==(r=n.g.process)?void 0:r.env)&&"object"==typeof(null==(i=n.g.process)?void 0:i.env)?n.g.process:n(3928)},3928:function(t){!function(){var e={229:function(t){var e,n,r,i=t.exports={};function o(){throw Error("setTimeout has not been defined")}function a(){throw Error("clearTimeout has not been defined")}function c(t){if(e===setTimeout)return setTimeout(t,0);if((e===o||!e)&&setTimeout)return e=setTimeout,setTimeout(t,0);try{return e(t,0)}catch(n){try{return e.call(null,t,0)}catch(n){return e.call(this,t,0)}}}!function(){try{e="function"==typeof setTimeout?setTimeout:o}catch(t){e=o}try{n="function"==typeof clearTimeout?clearTimeout:a}catch(t){n=a}}();var u=[],s=!1,l=-1;function d(){s&&r&&(s=!1,r.length?u=r.concat(u):l=-1,u.length&&f())}function f(){if(!s){var t=c(d);s=!0;for(var e=u.length;e;){for(r=u,u=[];++l<e;)r&&r[l].run();l=-1,e=u.length}r=null,s=!1,function(t){if(n===clearTimeout)return clearTimeout(t);if((n===a||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(t);try{n(t)}catch(e){try{return n.call(null,t)}catch(e){return n.call(this,t)}}}(t)}}function h(t,e){this.fun=t,this.array=e}function g(){}i.nextTick=function(t){var e=Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];u.push(new h(t,e)),1!==u.length||s||c(f)},h.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=g,i.addListener=g,i.once=g,i.off=g,i.removeListener=g,i.removeAllListeners=g,i.emit=g,i.prependListener=g,i.prependOnceListener=g,i.listeners=function(t){return[]},i.binding=function(t){throw Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(t){throw Error("process.chdir is not supported")},i.umask=function(){return 0}}},n={};function r(t){var i=n[t];if(void 0!==i)return i.exports;var o=n[t]={exports:{}},a=!0;try{e[t](o,o.exports,r),a=!1}finally{a&&delete n[t]}return o.exports}r.ab="//";var i=r(229);t.exports=i}()},937:function(t,e,n){"use strict";n.r(e),n.d(e,{default:function(){return m}});var r=n(7573),i=n(5774),o=n.n(i),a=n(7653);n(225);var c=n(8969);n(9304);var u=n(3875);function s({httpAgentOptions:t,actorOptions:e,context:n,identity:i,idlFactory:o,canisterId:s,children:l,onRequest:d,onResponse:f,onRequestError:h,onResponseError:g}){let[p,m]=(0,a.useState)();return(0,a.useEffect)(()=>{(async()=>{if(!i||!o||!s||!n)return;let r=new c.HttpAgent({identity:i,...t});"ic"!==u.env.DFX_NETWORK&&r.fetchRootKey().catch(t=>{console.warn("Unable to fetch root key. Check to ensure that your local replica is running"),console.error(t)}),m(new Proxy(c.Actor.createActor(o,{agent:r,canisterId:s,...e}),{get(t,e,n){let r=Reflect.get(t,e,n);return"function"==typeof r?async(...t)=>{try{d&&(t=d({methodName:e,args:t}));let n=await r.apply(this,t);if(f)return f({methodName:e,args:t,response:n});return n}catch(n){throw n instanceof TypeError?h&&(n=h({methodName:e,args:t,error:n})):g&&(n=g({methodName:e,args:t,error:n})),n}}:r}}))})()},[i,t,e,o,s,n,d,f,h,g]),(0,r.jsx)(n.Provider,{value:{actor:p},children:l})}let l=t=>{let{IDL:e}=t;return e.Service({createRecord:e.Func([e.Nat64,e.Nat64,e.Int16,e.Text],[e.Record({id:e.Principal,userId:e.Nat64,createdAt:e.Nat64,rate:e.Int16,movieId:e.Nat64,comment:e.Text})],[]),deleteRecord:e.Func([e.Principal],[e.Variant({Ok:e.Record({id:e.Principal,userId:e.Nat64,createdAt:e.Nat64,rate:e.Int16,movieId:e.Nat64,comment:e.Text}),Err:e.Variant({RecordingDoesNotExist:e.Principal,UserDoesNotExist:e.Principal})})],[]),editRecord:e.Func([e.Principal,e.Nat64,e.Nat64,e.Int16,e.Text],[e.Record({id:e.Principal,userId:e.Nat64,createdAt:e.Nat64,rate:e.Int16,movieId:e.Nat64,comment:e.Text})],[]),readRecord:e.Func([e.Principal],[e.Opt(e.Record({id:e.Principal,userId:e.Nat64,createdAt:e.Nat64,rate:e.Int16,movieId:e.Nat64,comment:e.Text}))],["query"])})};var d=n(3875);let f=d.env.CANISTER_ID_BACKEND;f&&function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.agent||new c.HttpAgent({...e.agentOptions});e.agent&&e.agentOptions&&console.warn("Detected both agent and agentOptions passed to createActor. Ignoring agentOptions and proceeding with the provided agent."),"ic"!==d.env.DFX_NETWORK&&n.fetchRootKey().catch(t=>{console.warn("Unable to fetch root key. Check to ensure that your local replica is running"),console.error(t)}),c.Actor.createActor(l,{agent:n,canisterId:t,...e.actorOptions})}(f);var h=n(1715);let g=(0,a.createContext)({actor:void 0});function p(t){let{children:e}=t,{identity:n}=(0,h.BM)();return(0,r.jsx)(s,{canisterId:f,context:g,identity:n,idlFactory:l,children:e})}function m(t){let{children:e}=t;return(0,a.useEffect)(()=>{document.title="NFID+ICP Playground"},[]),(0,r.jsx)("html",{lang:"en",children:(0,r.jsx)(h.tV,{children:(0,r.jsx)(p,{children:(0,r.jsx)("body",{className:o().className,children:e})})})})}},225:function(){},5774:function(t){t.exports={style:{fontFamily:"'__Inter_aaf875', '__Inter_Fallback_aaf875'",fontStyle:"normal"},className:"__className_aaf875"}},1715:function(t,e,n){"use strict";n.d(e,{BM:function(){return u},tV:function(){return s}});var r=n(7653),i=n(439),o=n(7573),a=n(3875),c=(0,r.createContext)(void 0),u=()=>{let t=(0,r.useContext)(c);if(!t)throw Error("useInternetIdentity must be used within an InternetIdentityProvider");return t};function s({createOptions:t,loginOptions:e,children:n}){let[u,s]=(0,r.useState)({isInitializing:!0,loginStatus:"idle"});function l(){let t=u.authClient?.getIdentity();if(!t)throw Error("Identity not found after successful login");s(e=>({...e,loginStatus:"success",identity:t}))}function d(t){s(e=>({...e,loginStatus:"error",loginError:Error(t)}))}async function f(){if(!u.authClient)throw Error("Auth client not initialized");if(await u.authClient.isAuthenticated())throw Error("User is already authenticated");s(t=>({...t,loginStatus:"logging-in"}));let t={identityProvider:a.env.II_URL,onSuccess:l,onError:d,maxTimeToLive:BigInt(36e11),...e};u.authClient.login(t)}async function h(){if(!u.authClient)throw Error("Auth client not initialized");await u.authClient.logout(),s(t=>({...t,identity:void 0,loginStatus:"idle"}))}return(0,r.useEffect)(()=>{(async()=>{let e={idleOptions:{disableDefaultIdleCallback:!0,disableIdle:!0,...t?.idleOptions},...t},n=await i.AuthClient.create(e),r=await n.isAuthenticated();if(s(t=>({...t,authClient:n})),r){let t=n.getIdentity();t&&s(e=>({...e,identity:t}))}s(t=>({...t,isInitializing:!1}))})()},[t]),(0,o.jsx)(c.Provider,{value:{isInitializing:u.isInitializing,login:f,loginStatus:u.loginStatus,loginError:u.loginError,isLoggingIn:"logging-in"===u.loginStatus,isLoginError:"error"===u.loginStatus,isLoginSuccess:"success"===u.loginStatus,isLoginIdle:"idle"===u.loginStatus,clear:h,identity:u.identity},children:n})}}},function(t){t.O(0,[333,439,293,286,744],function(){return t(t.s=7766)}),_N_E=t.O()}]);