"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[323],{9455:function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"NIL",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(t,"parse",{enumerable:!0,get:function(){return c.default}}),Object.defineProperty(t,"stringify",{enumerable:!0,get:function(){return d.default}}),Object.defineProperty(t,"v1",{enumerable:!0,get:function(){return n.default}}),Object.defineProperty(t,"v3",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(t,"v4",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(t,"v5",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(t,"validate",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(t,"version",{enumerable:!0,get:function(){return u.default}});var n=f(r(7947)),i=f(r(7302)),o=f(r(5745)),a=f(r(9406)),l=f(r(4016)),u=f(r(9080)),s=f(r(7823)),d=f(r(8037)),c=f(r(9337));function f(e){return e&&e.__esModule?e:{default:e}}},9970:function(e,t){function r(e){return(e+64>>>9<<4)+14+1}function n(e,t){let r=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(r>>16)<<16|65535&r}function i(e,t,r,i,o,a){var l;return n((l=n(n(t,e),n(i,a)))<<o|l>>>32-o,r)}function o(e,t,r,n,o,a,l){return i(t&r|~t&n,e,t,o,a,l)}function a(e,t,r,n,o,a,l){return i(t&n|r&~n,e,t,o,a,l)}function l(e,t,r,n,o,a,l){return i(t^r^n,e,t,o,a,l)}function u(e,t,r,n,o,a,l){return i(r^(t|~n),e,t,o,a,l)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,t.default=function(e){if("string"==typeof e){let t=unescape(encodeURIComponent(e));e=new Uint8Array(t.length);for(let r=0;r<t.length;++r)e[r]=t.charCodeAt(r)}return function(e){let t=[],r=32*e.length,n="0123456789abcdef";for(let i=0;i<r;i+=8){let r=e[i>>5]>>>i%32&255,o=parseInt(n.charAt(r>>>4&15)+n.charAt(15&r),16);t.push(o)}return t}(function(e,t){e[t>>5]|=128<<t%32,e[r(t)-1]=t;let i=1732584193,s=-271733879,d=-1732584194,c=271733878;for(let t=0;t<e.length;t+=16){let r=i,f=s,y=d,v=c;i=o(i,s,d,c,e[t],7,-680876936),c=o(c,i,s,d,e[t+1],12,-389564586),d=o(d,c,i,s,e[t+2],17,606105819),s=o(s,d,c,i,e[t+3],22,-1044525330),i=o(i,s,d,c,e[t+4],7,-176418897),c=o(c,i,s,d,e[t+5],12,1200080426),d=o(d,c,i,s,e[t+6],17,-1473231341),s=o(s,d,c,i,e[t+7],22,-45705983),i=o(i,s,d,c,e[t+8],7,1770035416),c=o(c,i,s,d,e[t+9],12,-1958414417),d=o(d,c,i,s,e[t+10],17,-42063),s=o(s,d,c,i,e[t+11],22,-1990404162),i=o(i,s,d,c,e[t+12],7,1804603682),c=o(c,i,s,d,e[t+13],12,-40341101),d=o(d,c,i,s,e[t+14],17,-1502002290),s=o(s,d,c,i,e[t+15],22,1236535329),i=a(i,s,d,c,e[t+1],5,-165796510),c=a(c,i,s,d,e[t+6],9,-1069501632),d=a(d,c,i,s,e[t+11],14,643717713),s=a(s,d,c,i,e[t],20,-373897302),i=a(i,s,d,c,e[t+5],5,-701558691),c=a(c,i,s,d,e[t+10],9,38016083),d=a(d,c,i,s,e[t+15],14,-660478335),s=a(s,d,c,i,e[t+4],20,-405537848),i=a(i,s,d,c,e[t+9],5,568446438),c=a(c,i,s,d,e[t+14],9,-1019803690),d=a(d,c,i,s,e[t+3],14,-187363961),s=a(s,d,c,i,e[t+8],20,1163531501),i=a(i,s,d,c,e[t+13],5,-1444681467),c=a(c,i,s,d,e[t+2],9,-51403784),d=a(d,c,i,s,e[t+7],14,1735328473),s=a(s,d,c,i,e[t+12],20,-1926607734),i=l(i,s,d,c,e[t+5],4,-378558),c=l(c,i,s,d,e[t+8],11,-2022574463),d=l(d,c,i,s,e[t+11],16,1839030562),s=l(s,d,c,i,e[t+14],23,-35309556),i=l(i,s,d,c,e[t+1],4,-1530992060),c=l(c,i,s,d,e[t+4],11,1272893353),d=l(d,c,i,s,e[t+7],16,-155497632),s=l(s,d,c,i,e[t+10],23,-1094730640),i=l(i,s,d,c,e[t+13],4,681279174),c=l(c,i,s,d,e[t],11,-358537222),d=l(d,c,i,s,e[t+3],16,-722521979),s=l(s,d,c,i,e[t+6],23,76029189),i=l(i,s,d,c,e[t+9],4,-640364487),c=l(c,i,s,d,e[t+12],11,-421815835),d=l(d,c,i,s,e[t+15],16,530742520),s=l(s,d,c,i,e[t+2],23,-995338651),i=u(i,s,d,c,e[t],6,-198630844),c=u(c,i,s,d,e[t+7],10,1126891415),d=u(d,c,i,s,e[t+14],15,-1416354905),s=u(s,d,c,i,e[t+5],21,-57434055),i=u(i,s,d,c,e[t+12],6,1700485571),c=u(c,i,s,d,e[t+3],10,-1894986606),d=u(d,c,i,s,e[t+10],15,-1051523),s=u(s,d,c,i,e[t+1],21,-2054922799),i=u(i,s,d,c,e[t+8],6,1873313359),c=u(c,i,s,d,e[t+15],10,-30611744),d=u(d,c,i,s,e[t+6],15,-1560198380),s=u(s,d,c,i,e[t+13],21,1309151649),i=u(i,s,d,c,e[t+4],6,-145523070),c=u(c,i,s,d,e[t+11],10,-1120210379),d=u(d,c,i,s,e[t+2],15,718787259),s=u(s,d,c,i,e[t+9],21,-343485551),i=n(i,r),s=n(s,f),d=n(d,y),c=n(c,v)}return[i,s,d,c]}(function(e){if(0===e.length)return[];let t=8*e.length,n=new Uint32Array(r(t));for(let r=0;r<t;r+=8)n[r>>5]|=(255&e[r/8])<<r%32;return n}(e),8*e.length))}},3618:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;let r="undefined"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto);t.default={randomUUID:r}},4016:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,t.default="00000000-0000-0000-0000-000000000000"},9337:function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,i=(n=r(7823))&&n.__esModule?n:{default:n};t.default=function(e){let t;if(!(0,i.default)(e))throw TypeError("Invalid UUID");let r=new Uint8Array(16);return r[0]=(t=parseInt(e.slice(0,8),16))>>>24,r[1]=t>>>16&255,r[2]=t>>>8&255,r[3]=255&t,r[4]=(t=parseInt(e.slice(9,13),16))>>>8,r[5]=255&t,r[6]=(t=parseInt(e.slice(14,18),16))>>>8,r[7]=255&t,r[8]=(t=parseInt(e.slice(19,23),16))>>>8,r[9]=255&t,r[10]=(t=parseInt(e.slice(24,36),16))/1099511627776&255,r[11]=t/4294967296&255,r[12]=t>>>24&255,r[13]=t>>>16&255,r[14]=t>>>8&255,r[15]=255&t,r}},2404:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,t.default=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i},3385:function(e,t){let r;Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){if(!r&&!(r="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)))throw Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return r(n)};let n=new Uint8Array(16)},4258:function(e,t){function r(e,t){return e<<t|e>>>32-t}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,t.default=function(e){let t=[1518500249,1859775393,2400959708,3395469782],n=[1732584193,4023233417,2562383102,271733878,3285377520];if("string"==typeof e){let t=unescape(encodeURIComponent(e));e=[];for(let r=0;r<t.length;++r)e.push(t.charCodeAt(r))}else Array.isArray(e)||(e=Array.prototype.slice.call(e));e.push(128);let i=Math.ceil((e.length/4+2)/16),o=Array(i);for(let t=0;t<i;++t){let r=new Uint32Array(16);for(let n=0;n<16;++n)r[n]=e[64*t+4*n]<<24|e[64*t+4*n+1]<<16|e[64*t+4*n+2]<<8|e[64*t+4*n+3];o[t]=r}o[i-1][14]=(e.length-1)*8/4294967296,o[i-1][14]=Math.floor(o[i-1][14]),o[i-1][15]=(e.length-1)*8&4294967295;for(let e=0;e<i;++e){let i=new Uint32Array(80);for(let t=0;t<16;++t)i[t]=o[e][t];for(let e=16;e<80;++e)i[e]=r(i[e-3]^i[e-8]^i[e-14]^i[e-16],1);let a=n[0],l=n[1],u=n[2],s=n[3],d=n[4];for(let e=0;e<80;++e){let n=Math.floor(e/20),o=r(a,5)+function(e,t,r,n){switch(e){case 0:return t&r^~t&n;case 1:case 3:return t^r^n;case 2:return t&r^t&n^r&n}}(n,l,u,s)+d+t[n]+i[e]>>>0;d=s,s=u,u=r(l,30)>>>0,l=a,a=o}n[0]=n[0]+a>>>0,n[1]=n[1]+l>>>0,n[2]=n[2]+u>>>0,n[3]=n[3]+s>>>0,n[4]=n[4]+d>>>0}return[n[0]>>24&255,n[0]>>16&255,n[0]>>8&255,255&n[0],n[1]>>24&255,n[1]>>16&255,n[1]>>8&255,255&n[1],n[2]>>24&255,n[2]>>16&255,n[2]>>8&255,255&n[2],n[3]>>24&255,n[3]>>16&255,n[3]>>8&255,255&n[3],n[4]>>24&255,n[4]>>16&255,n[4]>>8&255,255&n[4]]}},8037:function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,t.unsafeStringify=a;var n,i=(n=r(7823))&&n.__esModule?n:{default:n};let o=[];for(let e=0;e<256;++e)o.push((e+256).toString(16).slice(1));function a(e,t=0){return o[e[t+0]]+o[e[t+1]]+o[e[t+2]]+o[e[t+3]]+"-"+o[e[t+4]]+o[e[t+5]]+"-"+o[e[t+6]]+o[e[t+7]]+"-"+o[e[t+8]]+o[e[t+9]]+"-"+o[e[t+10]]+o[e[t+11]]+o[e[t+12]]+o[e[t+13]]+o[e[t+14]]+o[e[t+15]]}t.default=function(e,t=0){let r=a(e,t);if(!(0,i.default)(r))throw TypeError("Stringified UUID is invalid");return r}},7947:function(e,t,r){let n,i;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o,a=(o=r(3385))&&o.__esModule?o:{default:o},l=r(8037);let u=0,s=0;t.default=function(e,t,r){let o=t&&r||0,d=t||Array(16),c=(e=e||{}).node||n,f=void 0!==e.clockseq?e.clockseq:i;if(null==c||null==f){let t=e.random||(e.rng||a.default)();null==c&&(c=n=[1|t[0],t[1],t[2],t[3],t[4],t[5]]),null==f&&(f=i=(t[6]<<8|t[7])&16383)}let y=void 0!==e.msecs?e.msecs:Date.now(),v=void 0!==e.nsecs?e.nsecs:s+1,_=y-u+(v-s)/1e4;if(_<0&&void 0===e.clockseq&&(f=f+1&16383),(_<0||y>u)&&void 0===e.nsecs&&(v=0),v>=1e4)throw Error("uuid.v1(): Can't create more than 10M uuids/sec");u=y,s=v,i=f;let g=((268435455&(y+=122192928e5))*1e4+v)%4294967296;d[o++]=g>>>24&255,d[o++]=g>>>16&255,d[o++]=g>>>8&255,d[o++]=255&g;let h=y/4294967296*1e4&268435455;d[o++]=h>>>8&255,d[o++]=255&h,d[o++]=h>>>24&15|16,d[o++]=h>>>16&255,d[o++]=f>>>8|128,d[o++]=255&f;for(let e=0;e<6;++e)d[o+e]=c[e];return t||(0,l.unsafeStringify)(d)}},7302:function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=o(r(438)),i=o(r(9970));function o(e){return e&&e.__esModule?e:{default:e}}let a=(0,n.default)("v3",48,i.default);t.default=a},438:function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.URL=t.DNS=void 0,t.default=function(e,t,r){function n(e,n,a,l){var u;if("string"==typeof e&&(e=function(e){e=unescape(encodeURIComponent(e));let t=[];for(let r=0;r<e.length;++r)t.push(e.charCodeAt(r));return t}(e)),"string"==typeof n&&(n=(0,o.default)(n)),(null===(u=n)||void 0===u?void 0:u.length)!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");let s=new Uint8Array(16+e.length);if(s.set(n),s.set(e,n.length),(s=r(s))[6]=15&s[6]|t,s[8]=63&s[8]|128,a){l=l||0;for(let e=0;e<16;++e)a[l+e]=s[e];return a}return(0,i.unsafeStringify)(s)}try{n.name=e}catch(e){}return n.DNS=a,n.URL=l,n};var n,i=r(8037),o=(n=r(9337))&&n.__esModule?n:{default:n};let a="6ba7b810-9dad-11d1-80b4-00c04fd430c8";t.DNS=a;let l="6ba7b811-9dad-11d1-80b4-00c04fd430c8";t.URL=l},5745:function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=a(r(3618)),i=a(r(3385)),o=r(8037);function a(e){return e&&e.__esModule?e:{default:e}}t.default=function(e,t,r){if(n.default.randomUUID&&!t&&!e)return n.default.randomUUID();let a=(e=e||{}).random||(e.rng||i.default)();if(a[6]=15&a[6]|64,a[8]=63&a[8]|128,t){r=r||0;for(let e=0;e<16;++e)t[r+e]=a[e];return t}return(0,o.unsafeStringify)(a)}},9406:function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=o(r(438)),i=o(r(4258));function o(e){return e&&e.__esModule?e:{default:e}}let a=(0,n.default)("v5",80,i.default);t.default=a},7823:function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,i=(n=r(2404))&&n.__esModule?n:{default:n};t.default=function(e){return"string"==typeof e&&i.default.test(e)}},9080:function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,i=(n=r(7823))&&n.__esModule?n:{default:n};t.default=function(e){if(!(0,i.default)(e))throw TypeError("Invalid UUID");return parseInt(e.slice(14,15),16)}},323:function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0});let n=r(3176);n.__exportStar(r(2793),t),n.__exportStar(r(7288),t),n.__exportStar(r(3372),t)},5635:function(e,t,r){var n,i;Object.defineProperty(t,"__esModule",{value:!0}),t.NfidAuthClient=t.ERROR_USER_INTERRUPT=t.DelegationType=void 0;let o=r(3176),a=r(8969),l=r(439),u=r(4442),s=r(5712),d=r(8651),c=r(9558),f=r(4597);(i=n||(t.DelegationType=n={}))[i.GLOBAL=0]="GLOBAL",i[i.ANONYMOUS=1]="ANONYMOUS";let y="ECDSA",v="Ed25519";t.ERROR_USER_INTERRUPT="UserInterrupt";class _{static create(e={}){var t,r,n;return o.__awaiter(this,void 0,void 0,function*(){let i;console.debug("NfidAuthClient.create",{keyType:e.keyType});let o=null!==(t=e.storage)&&void 0!==t?t:new s.IdbStorage,d=null!==(r=e.keyType)&&void 0!==r?r:y,c=null;if(e.identity)c=e.identity;else{let e=yield o.get(s.KEY_STORAGE_KEY);if(!e&&s.isBrowser)try{let t=new s.LocalStorage,r=yield t.get(s.KEY_STORAGE_DELEGATION),n=yield t.get(s.KEY_STORAGE_KEY);r&&n&&d===y&&(console.log("Discovered an identity stored in localstorage. Migrating to IndexedDB"),yield o.set(s.KEY_STORAGE_DELEGATION,r),yield o.set(s.KEY_STORAGE_KEY,n),e=r,yield t.remove(s.KEY_STORAGE_DELEGATION),yield t.remove(s.KEY_STORAGE_KEY))}catch(e){console.error("error while attempting to recover localstorage: "+e)}if(e)try{"object"==typeof e?c=d===v&&"string"==typeof e?yield u.Ed25519KeyIdentity.fromJSON(e):yield u.ECDSAKeyIdentity.fromKeyPair(e):"string"==typeof e&&(c=u.Ed25519KeyIdentity.fromJSON(e))}catch(e){}}let f=new a.AnonymousIdentity,_=null;if(c)try{let t=yield o.get(s.KEY_STORAGE_DELEGATION);if("object"==typeof t&&null!==t)throw Error("Delegation chain is incorrectly stored. A delegation chain should be stored as a string.");e.identity?f=e.identity:t&&(_=u.DelegationChain.fromJSON(t),(0,u.isDelegationValid)(_)?f=u.DelegationIdentity.fromDelegation(c,_):(yield g(o),c=null))}catch(e){console.error(e),yield g(o),c=null}return(null===(n=e.idleOptions)||void 0===n?void 0:n.disableIdle)?i=void 0:(_||e.identity)&&(i=l.IdleManager.create(e.idleOptions)),c||(c=yield h(o,d,e.storage)),new this(f,c,_,o,i,e)})}constructor(e,t,r,n,i,o){var a;this._identity=e,this._key=t,this._chain=r,this._storage=n,this.idleManager=i,this._createOptions=o;let l=this.logout.bind(this),u=null==o?void 0:o.idleOptions;(null==u?void 0:u.onIdle)||(null==u?void 0:u.disableDefaultIdleCallback)||null===(a=this.idleManager)||void 0===a||a.registerCallback(()=>{l(),location.reload()})}getKey(){var e,t;return o.__awaiter(this,void 0,void 0,function*(){return h(this._storage,null===(e=this._createOptions)||void 0===e?void 0:e.keyType,null===(t=this._createOptions)||void 0===t?void 0:t.storage)})}getDelegationType(){var e,t;return(null===(t=null===(e=this._chain)||void 0===e?void 0:e.delegations[0].delegation.targets)||void 0===t?void 0:t.length)?n.GLOBAL:n.ANONYMOUS}renewDelegation(e){var t,r;return o.__awaiter(this,void 0,void 0,function*(){console.debug("NfidAuthClient.renewDelegation");let n=BigInt(8)*BigInt(36e11),i=(0,d.getIframe)(),o=yield(0,c.request)(i,{method:"ic_renewDelegation",params:[{sessionPublicKey:new Uint8Array(null===(t=this._key)||void 0===t?void 0:t.getPublicKey().toDer()),maxTimeToLive:null!==(r=null==e?void 0:e.maxTimeToLive)&&void 0!==r?r:n,targets:null==e?void 0:e.targets,derivationOrigin:null==e?void 0:e.derivationOrigin}]});if("error"in o)throw Error(o.error.message);return this._handleSuccess(o.result)})}login(e){var t;return o.__awaiter(this,void 0,void 0,function*(){this._key||(this._key=yield this.getKey());let r=BigInt(8)*BigInt(36e11),n=null==e?void 0:e.targets,i=null==e?void 0:e.derivationOrigin,o=(0,d.getIframe)(),a=yield(0,c.request)(o,{method:"ic_getDelegation",params:[Object.assign(Object.assign({sessionPublicKey:new Uint8Array(this._key.getPublicKey().toDer()),maxTimeToLive:null!==(t=null==e?void 0:e.maxTimeToLive)&&void 0!==t?t:r},n?{targets:n}:{}),i?{derivationOrigin:i}:{})]});if("error"in a)throw Error(a.error.message);return this._handleSuccess(a.result)})}logout(e={}){return o.__awaiter(this,void 0,void 0,function*(){if(yield g(this._storage),this._identity=new a.AnonymousIdentity,this._key=null,this._chain=null,e.returnTo)try{window.history.pushState({},"",e.returnTo)}catch(t){window.location.href=e.returnTo}})}getIdentity(){return this._identity}get isAuthenticated(){return!this.getIdentity().getPrincipal().isAnonymous()&&null!==this._chain}_handleSuccess(e){var t,r;return o.__awaiter(this,void 0,void 0,function*(){let n=e.delegations.map(e=>{var t;return{delegation:new u.Delegation(e.delegation.pubkey,e.delegation.expiration,null===(t=e.delegation.targets)||void 0===t?void 0:t.map(e=>f.Principal.fromText(e))),signature:e.signature.buffer}});console.debug("NfidAuthClient._handleSuccess",{delegations:n});let i=u.DelegationChain.fromDelegations(n,e.userPublicKey.buffer),o=this._key;if(!o)throw Error("missing key");this._chain=i;let a=u.DelegationIdentity.fromDelegation(o,this._chain);if(this._identity=a,!this.idleManager){let e=null===(t=this._createOptions)||void 0===t?void 0:t.idleOptions;this.idleManager=l.IdleManager.create(e),(null==e?void 0:e.onIdle)||(null==e?void 0:e.disableDefaultIdleCallback)||null===(r=this.idleManager)||void 0===r||r.registerCallback(()=>{this.logout(),location.reload()})}return this._chain&&(yield this._storage.set(s.KEY_STORAGE_DELEGATION,JSON.stringify(this._chain.toJSON()))),a})}}function g(e){return o.__awaiter(this,void 0,void 0,function*(){yield e.remove(s.KEY_STORAGE_KEY),yield e.remove(s.KEY_STORAGE_DELEGATION),yield e.remove(s.KEY_VECTOR)})}function h(e,t,r){return o.__awaiter(this,void 0,void 0,function*(){let n;return console.debug("getKey",{keyType:t}),t===v?(n=yield u.Ed25519KeyIdentity.generate(null),yield e.set(s.KEY_STORAGE_KEY,JSON.stringify(n.toJSON()))):(r&&t===y&&console.warn(`You are using a custom storage provider that may not support CryptoKey storage. If you are using a custom storage provider that does not support CryptoKey storage, you should use '${v}' as the key type, as it can serialize to a string`),n=yield u.ECDSAKeyIdentity.generate(),yield e.set(s.KEY_STORAGE_KEY,n.getKeyPair())),n})}t.NfidAuthClient=_},3090:function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.IdbKeyVal=void 0;let n=r(3176),i=r(6247),o=r(5712),a="nfid-auth-client-db",l="ic-keyval",u=(e=a,t=l,r)=>n.__awaiter(void 0,void 0,void 0,function*(){return o.isBrowser&&(null==localStorage?void 0:localStorage.getItem(o.KEY_STORAGE_DELEGATION))&&(localStorage.removeItem(o.KEY_STORAGE_DELEGATION),localStorage.removeItem(o.KEY_STORAGE_KEY)),yield(0,i.openDB)(e,r,{upgrade:e=>{e.objectStoreNames,e.objectStoreNames.contains(t)&&e.clear(t),e.createObjectStore(t)}})});class s{static create(e){return n.__awaiter(this,void 0,void 0,function*(){let{dbName:t=a,storeName:r=l,version:n=1}=null!=e?e:{};return new s((yield u(t,r,n)),r)})}constructor(e,t){this._db=e,this._storeName=t}set(e,t){return n.__awaiter(this,void 0,void 0,function*(){return yield function(e,t,r,i){return n.__awaiter(this,void 0,void 0,function*(){return yield e.put(t,i,r)})}(this._db,this._storeName,e,t)})}get(e){var t;return n.__awaiter(this,void 0,void 0,function*(){return null!==(t=yield function(e,t,r){return n.__awaiter(this,void 0,void 0,function*(){return yield e.get(t,r)})}(this._db,this._storeName,e))&&void 0!==t?t:null})}remove(e){return n.__awaiter(this,void 0,void 0,function*(){return yield function(e,t,r){return n.__awaiter(this,void 0,void 0,function*(){return yield e.delete(t,r)})}(this._db,this._storeName,e)})}}t.IdbKeyVal=s},3372:function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),r(3176).__exportStar(r(5635),t)},5712:function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.IdbStorage=t.LocalStorage=t.isBrowser=t.DB_VERSION=t.KEY_VECTOR=t.KEY_STORAGE_DELEGATION=t.KEY_STORAGE_KEY=void 0;let n=r(3176),i=r(3090);t.KEY_STORAGE_KEY="identity",t.KEY_STORAGE_DELEGATION="delegation",t.KEY_VECTOR="iv",t.DB_VERSION=1,t.isBrowser="undefined"!=typeof window;class o{constructor(e="ic-",t){this.prefix=e,this._localStorage=t}get(e){return Promise.resolve(this._getLocalStorage().getItem(this.prefix+e))}set(e,t){return this._getLocalStorage().setItem(this.prefix+e,t),Promise.resolve()}remove(e){return this._getLocalStorage().removeItem(this.prefix+e),Promise.resolve()}_getLocalStorage(){if(this._localStorage)return this._localStorage;let e="undefined"==typeof window?void 0===r.g?"undefined"==typeof self?void 0:self.localStorage:r.g.localStorage:window.localStorage;if(!e)throw Error("Could not find local storage.");return e}}t.LocalStorage=o;class a{get _db(){return new Promise(e=>{if(this.initializedDb){e(this.initializedDb);return}i.IdbKeyVal.create({version:t.DB_VERSION}).then(t=>{this.initializedDb=t,e(t)})})}get(e){return n.__awaiter(this,void 0,void 0,function*(){let t=yield this._db;return yield t.get(e)})}set(e,t){return n.__awaiter(this,void 0,void 0,function*(){let r=yield this._db;yield r.set(e,t)})}remove(e){return n.__awaiter(this,void 0,void 0,function*(){let t=yield this._db;yield t.remove(e)})}}t.IdbStorage=a},6764:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.IFRAME_ID=void 0,t.IFRAME_ID="nfid-embed"},8651:function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.getIframe=void 0;let n=r(6764);t.getIframe=()=>{let e=document.getElementById(n.IFRAME_ID);if(!e||!e.contentWindow)throw Error("nfid iframe not initialized");return e}},5243:function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.buildIframe=t.baseStyle=void 0;let n=r(6764),i=r(8651);t.baseStyle={position:"fixed",top:"0",left:"0",border:"none",width:"100%",height:"100%",zIndex:"9999",background:"rgba(9,10,19,0.5)",display:"none"};let o=e=>(console.debug("buildQuery",{params:e}),Object.keys(e).filter(t=>!!e[t]).length?Object.keys(e).reduce((t,r,n)=>`${t}${0===n?"?":"&"}${r}=${e[r]}`,""):"");t.buildIframe=({origin:e,applicationLogo:r,applicationName:a,onLoad:l})=>{let u;console.debug("buildIframe");let s=o({applicationLogo:r,applicationName:a}),d="embed",c=new URL(`${e}/${d}${s}`);console.debug("buildIframe",{PROVIDER_URL:c,QUERY:s,PATH:d});try{u=(0,i.getIframe)()}catch(e){u=document.createElement("iframe")}return u.id=n.IFRAME_ID,u.src=c.href,u.allow="publickey-credentials-get",Object.assign(u.style,t.baseStyle),u.onload=l,document.body.appendChild(u),u}},2793:function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.IframeManager=void 0;let n=r(5243);class i{static init({providerUrl:e,onLoad:t}){console.debug("IframeManager.constructor",{providerUrl:e}),i._iframe=(0,n.buildIframe)({origin:e,onLoad:t})}static show(){if(!this._iframe)throw Error("IframeManager not initialized");Object.assign(this._iframe.style,Object.assign(Object.assign({},n.baseStyle),{display:"block"}))}static hide(){if(!this._iframe)throw Error("IframeManager not initialized");Object.assign(this._iframe.style,Object.assign(Object.assign({},n.baseStyle),{display:"none"}))}static isVisible(){return!1}}t.IframeManager=i},6891:function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.hideIframe=t.showIframe=t.mountIframe=void 0;let n=r(3176),i=r(8651),o=r(5243);t.mountIframe=({iframe:e,onLoad:t})=>n.__awaiter(void 0,void 0,void 0,function*(){console.debug("mountIframe",{iframe:e}),window.document.body.appendChild(e),e.onload=t}),t.showIframe=()=>{let e=(0,i.getIframe)();e&&(console.debug("showIframe",{iframe:e}),Object.assign(e.style,Object.assign(Object.assign({},o.baseStyle),{display:"block"})))},t.hideIframe=()=>{let e=(0,i.getIframe)();e&&(console.debug("hideIframe",{iframe:e}),Object.assign(e.style,Object.assign(Object.assign({},o.baseStyle),{display:"none"})))}},7288:function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.NFID=void 0;let n=r(3176),i=r(5243),o=r(6891),a=r(3372),l=r(8651),u=r(9558);class s{constructor(e){this._nfidConfig=e,console.debug("NFID.constructor",{_nfidConfig:e})}static initIframe(e){return n.__awaiter(this,void 0,void 0,function*(){return console.debug("NFID.initIframe",{nfidConfig:e}),new Promise(t=>{var r,n;let o=(0,i.buildIframe)({origin:e.origin,applicationName:null===(r=e.application)||void 0===r?void 0:r.name,applicationLogo:null===(n=e.application)||void 0===n?void 0:n.logo,onLoad:()=>{s.isIframeInstantiated=!0,s.nfidIframe=o,console.debug("NFID.initIframe: iframe loaded",{nfidIframe:o}),t(!0)}})})})}static init(e){return n.__awaiter(this,void 0,void 0,function*(){let{origin:t="https://nfid.one"}=e,r=n.__rest(e,["origin"]);return yield new Promise((e,n)=>{let i=()=>{window.removeEventListener("message",l)},o=setTimeout(()=>{i(),n(Error("NFID.init iframe did not respond in time"))},3e4),l=n=>{"nfid_ready"===n.data.type&&(i(),console.debug("NFID.init authClient initiated"),clearTimeout(o),e(new this(Object.assign({origin:t},r))))};window.addEventListener("message",l),console.debug("NFID.init",Object.assign({origin:t},r)),s.initIframe(Object.assign({origin:t},r)),console.debug("NFID.init iframe initiated"),a.NfidAuthClient.create({identity:r.identity,storage:r.storage,keyType:r.keyType,idleOptions:r.idleOptions}).then(e=>{s._authClient=e})})})}getDelegation(e){var t,r;return n.__awaiter(this,void 0,void 0,function*(){console.debug("NFID.connect");let n=(null==e?void 0:e.derivationOrigin)||(null===(r=null===(t=this._nfidConfig)||void 0===t?void 0:t.ic)||void 0===r?void 0:r.derivationOrigin);if(!s.isIframeInstantiated)throw Error("NFID iframe not instantiated");return(0,o.showIframe)(),new Promise((t,r)=>{s._authClient.login(Object.assign(Object.assign({},e),{derivationOrigin:n})).then(e=>t(e)).catch(e=>r({error:e.message})).finally(o.hideIframe)})})}updateGlobalDelegation(e){var t,r;return n.__awaiter(this,void 0,void 0,function*(){let n=(null==e?void 0:e.derivationOrigin)||(null===(r=null===(t=this._nfidConfig)||void 0===t?void 0:t.ic)||void 0===r?void 0:r.derivationOrigin);if(console.debug("NFID.renewDelegation"),s._authClient.getDelegationType()===a.DelegationType.ANONYMOUS)throw Error("You can not update delegation from anonymous user");let i=yield s._authClient.renewDelegation(Object.assign(Object.assign({},e),{derivationOrigin:n}));if("error"in i)throw Error(i.error.message);return i})}getDelegationType(){return s._authClient.getDelegationType()}logout(){return n.__awaiter(this,void 0,void 0,function*(){return s._authClient.logout()})}requestTransferFT(e){var t,r;return n.__awaiter(this,void 0,void 0,function*(){console.debug("NFID.requestTransferFT");let n=(null==e?void 0:e.derivationOrigin)||(null===(r=null===(t=this._nfidConfig)||void 0===t?void 0:t.ic)||void 0===r?void 0:r.derivationOrigin);if(s._authClient.getDelegationType()===a.DelegationType.ANONYMOUS)throw Error("You can not call requestTransferFT from anonymous user");if(!s.nfidIframe)throw Error("NFID iframe not instantiated");(0,o.showIframe)();let i=(0,l.getIframe)(),d=yield(0,u.request)(i,{method:"ic_requestTransfer",params:[{receiver:e.receiver,amount:e.amount,memo:e.memo,derivationOrigin:n}]});if((0,o.hideIframe)(),"error"in d)throw Error(d.error.message);return d.result})}requestTransferNFT(e){var t,r;return n.__awaiter(this,void 0,void 0,function*(){console.debug("NFID.requestTransferNFT");let n=(null==e?void 0:e.derivationOrigin)||(null===(r=null===(t=this._nfidConfig)||void 0===t?void 0:t.ic)||void 0===r?void 0:r.derivationOrigin);if(s._authClient.getDelegationType()===a.DelegationType.ANONYMOUS)throw Error("You can not call requestTransferNFT from anonymous user");if(!s.nfidIframe)throw Error("NFID iframe not instantiated");(0,o.showIframe)();let i=(0,l.getIframe)(),d=yield(0,u.request)(i,{method:"ic_requestTransfer",params:[{receiver:e.receiver,tokenId:e.tokenId,derivationOrigin:n}]});if((0,o.hideIframe)(),"error"in d)throw Error(d.error.message);return d.result})}requestCanisterCall({method:e,canisterId:t,parameters:r,derivationOrigin:i}){var d,c;return n.__awaiter(this,void 0,void 0,function*(){if(console.debug("NFID.requestCanisterCall",{method:e,canisterId:t,parameters:r,derivationOrigin:i}),s._authClient.getDelegationType()===a.DelegationType.ANONYMOUS)throw Error("You can not call requestCanisterCall from anonymous user");if(!s.nfidIframe)throw Error("NFID iframe not instantiated");(0,o.showIframe)();let n=(0,l.getIframe)(),f=yield(0,u.request)(n,{method:"ic_canisterCall",params:[{method:e,canisterId:t,parameters:r,derivationOrigin:i||(null===(c=null===(d=this._nfidConfig)||void 0===d?void 0:d.ic)||void 0===c?void 0:c.derivationOrigin)}]});if((0,o.hideIframe)(),"error"in f)throw Error(f.error.message);return f.result})}get isAuthenticated(){return s._authClient.isAuthenticated}getIdentity(){return s._authClient.getIdentity()}}t.NFID=s,s.isIframeInstantiated=!1},9558:function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.request=t.RPC_BASE=void 0;let n=r(3176),i=r(9455);t.RPC_BASE={jsonrpc:"2.0"};class o extends Error{constructor(e,t,r){super(e),this.code=t,this.data=r}}t.request=function(e,{method:t,params:r},a={}){return n.__awaiter(this,void 0,void 0,function*(){let n=i.v4(),l={jsonrpc:"2.0",id:n,method:t,params:r,options:a};return console.debug("postmsg-rpc request",Object.assign({},l)),new Promise((t,r)=>{let i=a.timeout&&setTimeout(()=>{window.removeEventListener("message",u),r(new o("Request timed out",408))},a.timeout),u=e=>{e.data&&e.data.id===n&&(console.debug(`resolve id: ${n}`,{event:e}),t(e.data),window.removeEventListener("message",u),i&&clearTimeout(i))};window.addEventListener("message",u),e.contentWindow.postMessage(l,"*")})})}},3176:function(e,t,r){r.r(t),r.d(t,{__addDisposableResource:function(){return R},__assign:function(){return o},__asyncDelegator:function(){return S},__asyncGenerator:function(){return E},__asyncValues:function(){return T},__await:function(){return I},__awaiter:function(){return v},__classPrivateFieldGet:function(){return N},__classPrivateFieldIn:function(){return C},__classPrivateFieldSet:function(){return M},__createBinding:function(){return g},__decorate:function(){return l},__disposeResources:function(){return k},__esDecorate:function(){return s},__exportStar:function(){return h},__extends:function(){return i},__generator:function(){return _},__importDefault:function(){return P},__importStar:function(){return A},__makeTemplateObject:function(){return j},__metadata:function(){return y},__param:function(){return u},__propKey:function(){return c},__read:function(){return m},__rest:function(){return a},__runInitializers:function(){return d},__setFunctionName:function(){return f},__spread:function(){return b},__spreadArray:function(){return O},__spreadArrays:function(){return w},__values:function(){return p}});var n=function(e,t){return(n=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)};function i(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}var o=function(){return(o=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};function a(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&0>t.indexOf(n)&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)0>t.indexOf(n[i])&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r}function l(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var l=e.length-1;l>=0;l--)(i=e[l])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a}function u(e,t){return function(r,n){t(r,n,e)}}function s(e,t,r,n,i,o){function a(e){if(void 0!==e&&"function"!=typeof e)throw TypeError("Function expected");return e}for(var l,u=n.kind,s="getter"===u?"get":"setter"===u?"set":"value",d=!t&&e?n.static?e:e.prototype:null,c=t||(d?Object.getOwnPropertyDescriptor(d,n.name):{}),f=!1,y=r.length-1;y>=0;y--){var v={};for(var _ in n)v[_]="access"===_?{}:n[_];for(var _ in n.access)v.access[_]=n.access[_];v.addInitializer=function(e){if(f)throw TypeError("Cannot add initializers after decoration has completed");o.push(a(e||null))};var g=(0,r[y])("accessor"===u?{get:c.get,set:c.set}:c[s],v);if("accessor"===u){if(void 0===g)continue;if(null===g||"object"!=typeof g)throw TypeError("Object expected");(l=a(g.get))&&(c.get=l),(l=a(g.set))&&(c.set=l),(l=a(g.init))&&i.unshift(l)}else(l=a(g))&&("field"===u?i.unshift(l):c[s]=l)}d&&Object.defineProperty(d,n.name,c),f=!0}function d(e,t,r){for(var n=arguments.length>2,i=0;i<t.length;i++)r=n?t[i].call(e,r):t[i].call(e);return n?r:void 0}function c(e){return"symbol"==typeof e?e:"".concat(e)}function f(e,t,r){return"symbol"==typeof t&&(t=t.description?"[".concat(t.description,"]"):""),Object.defineProperty(e,"name",{configurable:!0,value:r?"".concat(r," ",t):t})}function y(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}function v(e,t,r,n){return new(r||(r=Promise))(function(i,o){function a(e){try{u(n.next(e))}catch(e){o(e)}}function l(e){try{u(n.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):((t=e.value)instanceof r?t:new r(function(e){e(t)})).then(a,l)}u((n=n.apply(e,t||[])).next())})}function _(e,t){var r,n,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function l(l){return function(u){return function(l){if(r)throw TypeError("Generator is already executing.");for(;o&&(o=0,l[0]&&(a=0)),a;)try{if(r=1,n&&(i=2&l[0]?n.return:l[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,l[1])).done)return i;switch(n=0,i&&(l=[2&l[0],i.value]),l[0]){case 0:case 1:i=l;break;case 4:return a.label++,{value:l[1],done:!1};case 5:a.label++,n=l[1],l=[0];continue;case 7:l=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===l[0]||2===l[0])){a=0;continue}if(3===l[0]&&(!i||l[1]>i[0]&&l[1]<i[3])){a.label=l[1];break}if(6===l[0]&&a.label<i[1]){a.label=i[1],i=l;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(l);break}i[2]&&a.ops.pop(),a.trys.pop();continue}l=t.call(e,a)}catch(e){l=[6,e],n=0}finally{r=i=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}([l,u])}}}var g=Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]};function h(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||g(t,e,r)}function p(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function m(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,i,o=r.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(n=o.next()).done;)a.push(n.value)}catch(e){i={error:e}}finally{try{n&&!n.done&&(r=o.return)&&r.call(o)}finally{if(i)throw i.error}}return a}function b(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(m(arguments[t]));return e}function w(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;for(var n=Array(e),i=0,t=0;t<r;t++)for(var o=arguments[t],a=0,l=o.length;a<l;a++,i++)n[i]=o[a];return n}function O(e,t,r){if(r||2==arguments.length)for(var n,i=0,o=t.length;i<o;i++)!n&&i in t||(n||(n=Array.prototype.slice.call(t,0,i)),n[i]=t[i]);return e.concat(n||Array.prototype.slice.call(t))}function I(e){return this instanceof I?(this.v=e,this):new I(e)}function E(e,t,r){if(!Symbol.asyncIterator)throw TypeError("Symbol.asyncIterator is not defined.");var n,i=r.apply(e,t||[]),o=[];return n={},a("next"),a("throw"),a("return"),n[Symbol.asyncIterator]=function(){return this},n;function a(e){i[e]&&(n[e]=function(t){return new Promise(function(r,n){o.push([e,t,r,n])>1||l(e,t)})})}function l(e,t){try{var r;(r=i[e](t)).value instanceof I?Promise.resolve(r.value.v).then(u,s):d(o[0][2],r)}catch(e){d(o[0][3],e)}}function u(e){l("next",e)}function s(e){l("throw",e)}function d(e,t){e(t),o.shift(),o.length&&l(o[0][0],o[0][1])}}function S(e){var t,r;return t={},n("next"),n("throw",function(e){throw e}),n("return"),t[Symbol.iterator]=function(){return this},t;function n(n,i){t[n]=e[n]?function(t){return(r=!r)?{value:I(e[n](t)),done:!1}:i?i(t):t}:i}}function T(e){if(!Symbol.asyncIterator)throw TypeError("Symbol.asyncIterator is not defined.");var t,r=e[Symbol.asyncIterator];return r?r.call(e):(e=p(e),t={},n("next"),n("throw"),n("return"),t[Symbol.asyncIterator]=function(){return this},t);function n(r){t[r]=e[r]&&function(t){return new Promise(function(n,i){!function(e,t,r,n){Promise.resolve(n).then(function(t){e({value:t,done:r})},t)}(n,i,(t=e[r](t)).done,t.value)})}}}function j(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}var D=Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t};function A(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&g(t,e,r);return D(t,e),t}function P(e){return e&&e.__esModule?e:{default:e}}function N(e,t,r,n){if("a"===r&&!n)throw TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)}function M(e,t,r,n,i){if("m"===n)throw TypeError("Private method is not writable");if("a"===n&&!i)throw TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?i.call(e,r):i?i.value=r:t.set(e,r),r}function C(e,t){if(null===t||"object"!=typeof t&&"function"!=typeof t)throw TypeError("Cannot use 'in' operator on non-object");return"function"==typeof e?t===e:e.has(t)}function R(e,t,r){if(null!=t){var n;if("object"!=typeof t&&"function"!=typeof t)throw TypeError("Object expected.");if(r){if(!Symbol.asyncDispose)throw TypeError("Symbol.asyncDispose is not defined.");n=t[Symbol.asyncDispose]}if(void 0===n){if(!Symbol.dispose)throw TypeError("Symbol.dispose is not defined.");n=t[Symbol.dispose]}if("function"!=typeof n)throw TypeError("Object not disposable.");e.stack.push({value:t,dispose:n,async:r})}else r&&e.stack.push({async:!0});return t}var K="function"==typeof SuppressedError?SuppressedError:function(e,t,r){var n=Error(r);return n.name="SuppressedError",n.error=e,n.suppressed=t,n};function k(e){function t(t){e.error=e.hasError?new K(t,e.error,"An error was suppressed during disposal."):t,e.hasError=!0}return function r(){for(;e.stack.length;){var n=e.stack.pop();try{var i=n.dispose&&n.dispose.call(n.value);if(n.async)return Promise.resolve(i).then(r,function(e){return t(e),r()})}catch(e){t(e)}}if(e.hasError)throw e.error}()}t.default={__extends:i,__assign:o,__rest:a,__decorate:l,__param:u,__metadata:y,__awaiter:v,__generator:_,__createBinding:g,__exportStar:h,__values:p,__read:m,__spread:b,__spreadArrays:w,__spreadArray:O,__await:I,__asyncGenerator:E,__asyncDelegator:S,__asyncValues:T,__makeTemplateObject:j,__importStar:A,__importDefault:P,__classPrivateFieldGet:N,__classPrivateFieldSet:M,__classPrivateFieldIn:C,__addDisposableResource:R,__disposeResources:k}}}]);